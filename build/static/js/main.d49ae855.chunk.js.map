{"version":3,"sources":["components/Notification.js","components/Errormessage.js","components/Home.js","services/blogs.js","reducers/errorReducer.js","reducers/notificationReducer.js","reducers/blogReducer.js","components/Editform.js","components/Blog.js","components/Users.js","components/User.js","services/users.js","reducers/userReducer.js","components/Createaccount.js","components/Footer.js","services/login.js","reducers/loginReducer.js","components/LoginForm.js","components/BlogForm.js","components/Blogtable.js","components/Logout.js","App.js","index.js"],"names":["connect","state","notification","props","message","react_default","a","createElement","Alert","variant","error","blogs","users","randomComments","blogsWithComments","filter","blog","comments","length","randomNumMax1","chosenBlog","Math","floor","random","undefined","randomNumMax2","chosenComment","randomComment","react_router_dom","to","concat","id","title","slicedBlogs","sort","b","likes","slice","Table","map","key","className","topFive","topUser","username","mostActive","baseUrl","token","services_blogs","getAll","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","axios","get","sent","abrupt","data","stop","apply","this","arguments","_ref2","_callee2","_context2","_x","getComments","_ref3","_callee3","_context3","_x2","setToken","newToken","create","_ref4","_callee4","newObject","config","_context4","headers","Authorization","post","_x3","update","_ref5","_callee5","updatedObject","_context5","put","_x4","remove","_ref6","_callee6","_context6","delete","_x5","errorChange","errorMsg","displayTime","dispatch","type","setTimeout","errorReducer","action","notificationChange","notificationMsg","notificationReducer","vote","votedBlog","blogService","removeBlog","deletableBlog","updateBlog","blogToUpdate","updatedBlog","blogReducer","blogToChange","find","n","changedBlog","objectSpread","blogObject","removeObject","updateObject","console","log","mapDispatchToProps","submitHandler","event","updatedAuthor","updatedUrl","preventDefault","target","author","value","trim","url","search","user","name","setShowEdit","t0","Form","onSubmit","Group","Label","Control","Button","onClick","withRouter","ownProps","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","likeHandler","_useState","useState","_useState2","slicedToArray","setComments","_useState3","_useState4","commentBoxVisible","setCommentBoxVisible","_useState5","_useState6","showEdit","useEffect","foundComments","commentArray","deleteHandler","window","confirm","history","push","newComment","previousComments","comment","components_Editform","style","href","size","JSON","parse","localStorage","getItem","deleteAndEditButtons","hideWhenVisible","display","showWhenVisible","as","rows","commentBox","indexOf","totalUsers","activeUsers","commentedBlogs","totalComments","reduce","parseInt","toFixed","striped","services_users","then","userReducer","userObject","addUser","newUser","addedUser","userService","password","password2","newUserObject","Footer","services_login","login","credentials","loginReducer","changeLogin","loginDetails","loginService","setItem","stringify","Fragment","addBlog","newBlog","addedBlog","loggedUser","urlValue","setNewBlogVisible","Number","isInteger","titleFilter","setTitleFilter","authorFilter","setAuthorFilter","onChange","placeholder","authorFiltered","toLowerCase","blogsToShow","resetLogin","removeItem","setUser","initialBlogs","allBlogs","initialUsers","allUsers","newBlogVisible","loggedUserJSON","totalBlogs","padding","react_router","exact","path","render","components_Errormessage","components_Notification","components_LoginForm","components_Createaccount","Navbar","collapseOnSelect","expand","bg","Toggle","aria-controls","Brand","Collapse","Nav","Link","components_Logout","components_Home","components_BlogForm","blogForm","components_Blogtable","match","components_Blog","params","components_Users","components_User","component","components_Footer","reducer","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","es","src_App","document","getElementById","subscribe"],"mappings":"iMA2BeA,cANS,SAACC,GACxB,MAAO,CACNC,aAAcD,EAAMC,eAIPF,CAvBM,SAACG,GACrB,IAAMC,EAAUD,EAAMD,aACtB,OAAgB,OAAZE,EACI,KAIPC,EAAAC,EAAAC,cAAA,WACGH,GACDC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAOC,QAAQ,WACbL,MCcSJ,cANS,SAACC,GACxB,MAAO,CACNS,MAAOT,EAAMS,QAIAV,CAxBM,SAACG,GACrB,IAAMC,EAAUD,EAAMO,MAEtB,OAAgB,OAAZN,EACI,KAIPC,EAAAC,EAAAC,cAAA,WACGH,GACDC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAOC,QAAQ,UACbL,sBCwGSJ,cAPS,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,QAIAZ,CAhHF,SAACG,GAEb,IA2CMU,EAAiB,SAACF,GAEvB,IAAMG,EAAoBH,EAAMI,OAAO,SAAAC,GAAI,OAA6B,IAAzBA,EAAKC,SAASC,SACvDC,EAAgBL,EAAkBI,OAElCE,EAAaC,KAAKC,MAAMD,KAAKE,SAAWJ,GAE9C,QAAsCK,IAAlCV,EAAkBM,GACrB,OAAO,KAER,IAAMK,EAAgBX,EAAkBM,GAAYH,SAASC,OAEvDQ,EAAgBL,KAAKC,MAAMD,KAAKE,SAAWE,GAC3CE,EAAgBb,EAAkBM,GAAYH,SAASS,GAC7D,YAAsBF,IAAlBG,EACI,KAGPtB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,UACEoB,GAEFtB,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,iBAAQF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYhB,EAAkBM,GAAYW,KAAOjB,EAAkBM,GAAYY,WAMnG,OACC3B,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,WA9Ea,SAACI,GAChB,IAGMsB,EAHctB,EAAMuB,KAAK,SAAC5B,EAAG6B,GAClC,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAEYC,MAAM,EAAG,GACzC,YAAoBb,IAAhBS,EACI,KAGP5B,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,KACCjC,EAAAC,EAAAC,cAAA,aACE0B,EAAYM,IAAI,SAAAvB,GAChB,OACCX,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IACb1B,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IAAI1B,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYd,EAAKe,KAAOf,EAAKgB,QACvD3B,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,cAAczB,EAAKoB,MAAjC,gBA+DJM,CAAQvC,EAAMQ,OACfN,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,WAxDgB,SAACK,GACnB,IAMM+B,EANc/B,EAAMsB,KAAK,SAAC5B,EAAG6B,GAClC,OAAOA,EAAExB,MAAMO,OAASZ,EAAEK,MAAMO,SAKL,GAE5B,YAAgBM,IAAZmB,EACI,KAGPtC,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYa,EAAQZ,KAAOY,EAAQC,WAAnD,SAA8ED,EAAQhC,MAAMO,OAA5F,kBA4CD2B,CAAW1C,EAAMS,OAClBP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,6HACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,KACCjC,EAAAC,EAAAC,cAAA,aAEEM,EAAeV,EAAMQ,OACrBE,EAAeV,EAAMQ,OACrBE,EAAeV,EAAMQ,OACrBE,EAAeV,EAAMQ,OACrBE,EAAeV,EAAMQ,qDCtGtBmC,EAAU,cAEZC,EAAQ,KA2CGC,EAAA,CAACC,OApCJ,eAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,IAAA,IAAAC,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACSC,IAAMC,IAAIhB,GADnB,cACRU,EADQE,EAAAK,KAAAL,EAAAM,OAAA,SAEPR,EAASS,MAFF,wBAAAP,EAAAQ,SAAAX,MAAH,yBAAAL,EAAAiB,MAAAC,KAAAC,YAAA,GAoCYP,IA/Bf,eAAAQ,EAAAnB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAiB,EAAMvD,GAAN,IAAAwC,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACYC,IAAMC,IAAIhB,EAAU9B,EAAKe,IADrC,cACLyB,EADKgB,EAAAT,KAAAS,EAAAR,OAAA,SAEJR,EAASS,MAFL,wBAAAO,EAAAN,SAAAK,MAAH,gBAAAE,GAAA,OAAAH,EAAAH,MAAAC,KAAAC,YAAA,GA+BoBK,YA1BZ,eAAAC,EAAAxB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAsB,EAAM5D,GAAN,IAAAwC,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAAiB,EAAAjB,KAAA,EACIC,IAAMC,IAAIhB,EAAU9B,EAAKe,GAAK,aADlC,cACbyB,EADaqB,EAAAd,KAAAc,EAAAb,OAAA,SAEZR,EAASS,MAFG,wBAAAY,EAAAX,SAAAU,MAAH,gBAAAE,GAAA,OAAAH,EAAAR,MAAAC,KAAAC,YAAA,GA0ByBU,SAxCzB,SAAAC,GAChBjC,EAAK,UAAAjB,OAAakD,IAuCiCC,OArBxC,eAAAC,EAAA/B,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAA6B,EAAMC,GAAN,IAAAC,EAAA7B,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cACRyB,EAAS,CACdE,QAAS,CAACC,cAAezC,IAFZuC,EAAA1B,KAAA,EAISC,IAAM4B,KAAK3C,EAASsC,EAAWC,GAJxC,cAIR7B,EAJQ8B,EAAAvB,KAAAuB,EAAAtB,OAAA,SAKPR,EAASS,MALF,wBAAAqB,EAAApB,SAAAiB,MAAH,gBAAAO,GAAA,OAAAR,EAAAf,MAAAC,KAAAC,YAAA,GAqBgDsB,OAbhD,eAAAC,EAAAzC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAuC,EAAMC,GAAN,IAAAtC,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAsC,GAAA,cAAAA,EAAApC,KAAAoC,EAAAnC,MAAA,cAAAmC,EAAAnC,KAAA,EACSC,IAAMmC,IAAIlD,EAAUgD,EAAc/D,GAAI+D,GAD/C,cACRtC,EADQuC,EAAAhC,KAAAgC,EAAA/B,OAAA,SAEPR,EAASS,MAFF,wBAAA8B,EAAA7B,SAAA2B,MAAH,gBAAAI,GAAA,OAAAL,EAAAzB,MAAAC,KAAAC,YAAA,GAawD6B,OARxD,eAAAC,EAAAhD,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAA8C,EAAOrE,GAAP,IAAAsD,EAAA7B,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAA4C,GAAA,cAAAA,EAAA1C,KAAA0C,EAAAzC,MAAA,cACRyB,EAAS,CACdE,QAAS,CAACC,cAAezC,IAFZsD,EAAAzC,KAAA,EAISC,IAAMyC,OAAOxD,EAAUf,EAAIsD,GAJpC,cAIR7B,EAJQ6C,EAAAtC,KAAAsC,EAAArC,OAAA,SAKPR,EAASS,MALF,wBAAAoC,EAAAnC,SAAAkC,MAAH,gBAAAG,GAAA,OAAAJ,EAAAhC,MAAAC,KAAAC,YAAA,aClCCmC,EAAc,SAACC,EAAUC,GACrC,sBAAAxD,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAC,EAAMoD,GAAN,OAAAtD,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACA+C,EAAS,CACdC,KAAM,eACNlG,MAAO+F,IAHF,OAKNI,WAAW,kBAAMF,EAAS,CACzBC,KAAM,eACNlG,MAAO,QACU,IAAdgG,GARE,wBAAAhD,EAAAQ,SAAAX,MAAP,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,IAqBcyC,EATM,WAAkC,IAAjC7G,EAAiCoE,UAAAnD,OAAA,QAAAM,IAAA6C,UAAA,GAAAA,UAAA,GAflC,KAeuB0C,EAAW1C,UAAAnD,OAAA,EAAAmD,UAAA,QAAA7C,EACtD,OAAQuF,EAAOH,MACf,IAAK,eACJ,OAAOG,EAAOrG,MACf,QACC,OAAOT,IClBI+G,EAAqB,SAACC,EAAiBP,GACnD,sBAAAxD,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAC,EAAMoD,GAAN,OAAAtD,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACA+C,EAAS,CACdC,KAAM,sBACN1G,aAAc+G,IAHT,OAKNJ,WAAW,kBAAMF,EAAS,CACzBC,KAAM,sBACN1G,aAAc,QACG,IAAdwG,GARE,wBAAAhD,EAAAQ,SAAAX,MAAP,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,IAqBc6C,EATa,WAAyC,IAAxCjH,EAAwCoE,UAAAnD,OAAA,QAAAM,IAAA6C,UAAA,GAAAA,UAAA,GAfzC,KAe8B0C,EAAW1C,UAAAnD,OAAA,EAAAmD,UAAA,QAAA7C,EACpE,OAAQuF,EAAOH,MACf,IAAK,sBACJ,OAAOG,EAAO7G,aACf,QACC,OAAOD,YClBIkH,EAAO,SAAAnG,GACnB,sBAAAkC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAC,EAAMoD,GAAN,IAAAS,EAAA,OAAA/D,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACkByD,EAAY1B,OAAO3E,GADrC,OACAoG,EADA1D,EAAAK,KAEN4C,EAAS,CACRC,KAAM,OACN3C,KAAMmD,IAJD,wBAAA1D,EAAAQ,SAAAX,MAAP,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,IAyBYiD,EAAa,SAAAC,GACzB,sBAAA5C,EAAAxB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAsB,EAAM+B,GAAN,OAAAtD,EAAA/C,EAAAmD,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAAiB,EAAAjB,KAAA,EACAyD,EAAYnB,OAAOqB,EAAcxF,IADjC,OAEN4E,EAAS,CACRC,KAAM,cACN3C,KAAMsD,IAJD,wBAAA1C,EAAAX,SAAAU,MAAP,gBAAAc,GAAA,OAAAf,EAAAR,MAAAC,KAAAC,YAAA,IASYmD,EAAa,SAAAC,GACzB,sBAAAvC,EAAA/B,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAA6B,EAAMwB,GAAN,IAAAe,EAAA,OAAArE,EAAA/C,EAAAmD,KAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cAAA0B,EAAA1B,KAAA,EACoByD,EAAY1B,OAAO8B,GADvC,OACAC,EADApC,EAAAvB,KAEN4C,EAAS,CACRC,KAAM,cACN3C,KAAMyD,IAJD,wBAAApC,EAAApB,SAAAiB,MAAP,gBAAAc,GAAA,OAAAf,EAAAf,MAAAC,KAAAC,YAAA,IA0DcsD,EAvCK,WAAwB,IAAvB1H,EAAuBoE,UAAAnD,OAAA,QAAAM,IAAA6C,UAAA,GAAAA,UAAA,GAAf,GAAI0C,EAAW1C,UAAAnD,OAAA,EAAAmD,UAAA,QAAA7C,EAC3C,OAAQuF,EAAOH,MACf,IAAK,OACJ,IAAM7E,EAAKgF,EAAO9C,KAAKlC,GACjB6F,EAAe3H,EAAM4H,KAAK,SAAAC,GAAC,OAAIA,EAAE/F,KAAOA,IACxCgG,EAAW5E,OAAA6E,EAAA,EAAA7E,CAAA,GACbyE,EADa,CAEhBxF,MAAOwF,EAAaxF,MAAQ,IAE7B,OAAOnC,EAAMsC,IAAI,SAAAvB,GAAI,OACpBA,EAAKe,KAAOA,EAAKf,EAAO+G,IACvB7F,KAAK,SAAC5B,EAAG6B,GACV,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAErB,IAAK,WACJ,IAAM6F,EAAU9E,OAAA6E,EAAA,EAAA7E,CAAA,GAAO4D,EAAO9C,MAC9B,OAAOhE,EAAM6B,OAAOmG,GAAY/F,KAAK,SAAC5B,EAAG6B,GACxC,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAErB,IAAK,cACJ,IAAM8F,EAAenB,EAAO9C,KAC5B,OAAOhE,EAAMc,OAAO,SAAAC,GAAI,OAAIA,EAAKe,KAAOmG,EAAanG,KACtD,IAAK,cACJ,IAAMoG,EAAepB,EAAO9C,KAE5B,OADAmE,QAAQC,IAAIF,GACLlI,EAAMsC,IAAI,SAAAvB,GAAI,OACpBA,EAAKe,KAAOoG,EAAapG,GAAKf,EAAOmH,IACpCjG,KAAK,SAAC5B,EAAG6B,GACV,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAErB,IAAK,aACJ,OAAO2E,EAAO9C,KAAK/B,KAAK,SAAC5B,EAAG6B,GAC3B,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAErB,QACC,OAAOnC,ICrBHqI,EAAqB,CAC1BnB,OACAX,cACAc,aACAE,aACAR,sBAGchH,cAAQ,KAAMsI,EAAdtI,CA1EE,SAACG,GACjB,IAAMa,EAAOb,EAAMa,KAEbuH,EAAa,eAAArF,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAOiF,GAAP,IAAAC,EAAAC,EAAAT,EAAA,OAAA5E,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrB4E,EAAMG,iBAKAF,EAAqD,KAArCD,EAAMI,OAAOC,OAAOC,MAAMC,OAAgB/H,EAAK6H,OAASL,EAAMI,OAAOC,OAAOC,MAC5FJ,EAA+C,KAAlCF,EAAMI,OAAOI,IAAIF,MAAMC,OAAgB/H,EAAKgI,IAAMR,EAAMI,OAAOI,IAAIF,MAEhFb,EAAa,CAClBjG,MAAOhB,EAAKgB,MACZ6G,OAAQJ,EACRO,KAAwC,IAAnCN,EAAWO,OAAO,YAAqB,WAAaP,EAAaA,EACtEtG,MAAOpB,EAAKoB,MACZ8G,KAAM,CACLnH,GAAIf,EAAKkI,KAAKnH,GACdoH,KAAMnI,EAAKkI,KAAKC,KAChBvG,SAAU5B,EAAKkI,KAAKtG,UAErBb,GAAIf,EAAKe,GACTd,SAAUD,EAAKC,UAEhBuH,EAAMI,OAAOC,OAAOC,MAAQ,GAC5BN,EAAMI,OAAOI,IAAIF,MAAQ,GAvBJpF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EA0BdzD,EAAMqH,WAAWS,GA1BH,OA2BpB9H,EAAM6G,mBAAN,GAAAlF,OAA4Bd,EAAKgB,MAAjC,yBAA+D,GAC/D7B,EAAMiJ,aAAY,GA5BE1F,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA2F,GAAA3F,EAAA,UAgChB+E,EAAcvH,OAAS,IAAMwH,EAAWxH,OAAS,MACpDf,EAAMqG,YAAY,uFAAwF,GAjCvF,yBAAA9C,EAAAQ,SAAAX,EAAA,kBAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GAsCnB,OACChE,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,uBAAcF,EAAAC,EAAAC,cAAA,SAAI,KAAUS,EAAKgB,MAAO,KACxC3B,EAAAC,EAAAC,cAAC+I,EAAA,EAAD,CAAMC,SAAUhB,GACflI,EAAAC,EAAAC,cAAC+I,EAAA,EAAKE,MAAN,KACCnJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,oBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,WAEN9I,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,iBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,QAEN9I,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,UAAUmG,KAAK,UAA/B,QAZD,IAYuDvG,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ/C,KAAK,SAAb,WAGxDvG,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQC,QAAS,kBAAMzJ,EAAMiJ,aAAY,KAAzC,qBC2IGd,EAAqB,CAC1BnB,OACAX,cACAc,aACAE,aACAR,sBAGc6C,cAAW7J,YAjBF,SAACC,EAAO6J,GAE/B,MAAO,CACN9I,KAFY8I,EAAS9I,KAGrBN,MAAOT,EAAMS,MACbR,aAAcD,EAAMC,eAY6BoI,EAAzBtI,CAxMb,SAACG,GACb,IAAMa,EAAOb,EAAMa,KACb+I,EAAY,CACjBC,WAAY,GACZC,YAAa,EACbC,OAAQ,QACRC,YAAa,EACbC,aAAc,GAGTC,EAAW,eAAAnH,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAOvC,GAAP,IAAAmH,EAAA,OAAA9E,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACbuE,EAAe,CACpBpG,GAAIf,EAAKe,GACTmH,KAAMlI,EAAKkI,KAAKnH,GAChBC,MAAOhB,EAAKgB,MACZ6G,OAAQ7H,EAAK6H,OACbG,IAAKhI,EAAKgI,IACV5G,MAAOpB,EAAKoB,MAAQ,EACpBnB,SAAUD,EAAKC,UAEhBd,EAAMgH,KAAKgB,GAVQ,wBAAAzE,EAAAQ,SAAAX,MAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GAVMiG,EAuBSC,mBAAS,IAvBlBC,EAAArH,OAAAsH,EAAA,EAAAtH,CAAAmH,EAAA,GAuBhBrJ,EAvBgBuJ,EAAA,GAuBNE,EAvBMF,EAAA,GAAAG,EAwB2BJ,oBAAS,GAxBpCK,EAAAzH,OAAAsH,EAAA,EAAAtH,CAAAwH,EAAA,GAwBhBE,EAxBgBD,EAAA,GAwBGE,EAxBHF,EAAA,GAAAG,EAyBSR,oBAAS,GAzBlBS,EAAA7H,OAAAsH,EAAA,EAAAtH,CAAA4H,EAAA,GAyBhBE,EAzBgBD,EAAA,GAyBN5B,EAzBM4B,EAAA,GA2BvBE,oBAAU,WAOLlK,GANc,eAAAsD,EAAAnB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAiB,EAAOvD,GAAP,IAAAmK,EAAA,OAAA9H,EAAA/C,EAAAmD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACQyD,EAAY3C,YAAY1D,GADhC,OAES,KADvBmK,EADc3G,EAAAT,MAEF7C,QACjBwJ,EAAYS,GAHO,wBAAA3G,EAAAN,SAAAK,MAAH,gBAAAO,GAAA,OAAAR,EAAAH,MAAAC,KAAAC,YAAA,EAOjB+G,CAAapK,IAEZ,CAACA,EAAMb,EAAMD,aAAcC,EAAMO,QAIpC,IAeM2K,EAAa,eAAA1G,EAAAxB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAsB,EAAO5D,GAAP,OAAAqC,EAAA/C,EAAAmD,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,WACjB0H,OAAOC,QAAP,0BAAAzJ,OAAyCd,EAAKgB,MAA9C,SAAAF,OAA2Dd,EAAK6H,OAAhE,oCADiB,CAAAhE,EAAAjB,KAAA,eAAAiB,EAAAjB,KAAA,EAEdzD,EAAMmH,WAAWtG,GAFH,OAGpBb,EAAMqG,YAAN,IAAA1E,OAAsBd,EAAKgB,MAA3B,SAAAF,OAAwCd,EAAK6H,OAA7C,YAA+D,GAC/D1I,EAAMqL,QAAQC,KAAK,UAJC,wBAAA5G,EAAAX,SAAAU,MAAH,gBAAAc,GAAA,OAAAf,EAAAR,MAAAC,KAAAC,YAAA,GAQbkE,EAAa,eAAArD,EAAA/B,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAA6B,EAAOqD,GAAP,IAAAkD,EAAAC,EAAA1D,EAAA,OAAA5E,EAAA/C,EAAAmD,KAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cACrB4E,EAAMG,iBACA+C,EAAalD,EAAMI,OAAOgD,QAAQ9C,MAAMC,OACxC4C,EAAmB1K,EACnBgH,EAAa,CAClBjG,MAAOhB,EAAKgB,MACZ6G,OAAQ7H,EAAK6H,OACbG,IAAKhI,EAAKgI,IACV5G,MAAOpB,EAAKoB,MACZ8G,KAAM,CACLnH,GAAIf,EAAKkI,KAAKnH,GACdoH,KAAMnI,EAAKkI,KAAKC,KAChBvG,SAAU5B,EAAKkI,KAAKtG,UAErBb,GAAIf,EAAKe,GACTd,SAAU0K,EAAiB7J,OAAO4J,IAGnClD,EAAMI,OAAOgD,QAAQ9C,MAAQ,GAlBRxD,EAAA3B,KAAA,EAAA2B,EAAA1B,KAAA,EAoBdzD,EAAMqH,WAAWS,GApBH,OAqBpB9H,EAAM6G,mBAAmB,iBAAkB,GAC3C0D,EAAYiB,EAAiB7J,OAAO4J,IACpCZ,GAAqB,GAvBDxF,EAAA1B,KAAA,iBAAA0B,EAAA3B,KAAA,GAAA2B,EAAA+D,GAAA/D,EAAA,SA0BhBoG,EAAWxK,OAAS,EACvBf,EAAMqG,YAAY,6DAA8D,GAExEkF,EAAWxK,OAAS,KAC5Bf,EAAMqG,YAAY,6CAA8C,GA9B7C,yBAAAlB,EAAApB,SAAAiB,EAAA,kBAAH,gBAAAc,GAAA,OAAAf,EAAAf,MAAAC,KAAAC,YAAA,GA6DnB,YAAa7C,IAATR,EACI,KAIPX,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sBAAcS,EAAKe,IACnB1B,EAAAC,EAAAC,cAAA,WACC0K,EACA5K,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACsL,EAAD,CAAU7K,KAAMA,EAAMoI,YAAaA,KAGpC/I,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,KACCjC,EAAAC,EAAAC,cAAA,aACCF,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IACb1B,EAAAC,EAAAC,cAAA,MAAIuL,MAAO/B,GACV1J,EAAAC,EAAAC,cAAA,mBAAWS,EAAKgB,OAChB3B,EAAAC,EAAAC,cAAA,oBAAYS,EAAK6H,QACjBxI,EAAAC,EAAAC,cAAA,iBAAQF,EAAAC,EAAAC,cAAA,KAAGwL,KAAM/K,EAAKgI,KAAMhI,EAAKgI,MACjC3I,EAAAC,EAAAC,cAAA,mBAAWS,EAAKoB,OAChB/B,EAAAC,EAAAC,cAAA,sBAAaF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYd,EAAKkI,KAAKnH,KAAOf,EAAKkI,KAAKtG,YAE7DvC,EAAAC,EAAAC,cAAA,MAAIuL,MAAO/B,GACV1J,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,UAAUuL,KAAK,KAAKpC,QAAS,kBAAMS,EAAYrJ,KAA/D,SA7GL,SAACA,GAG7B,GADmBiL,KAAKC,MAAMZ,OAAOa,aAAaC,QAAQ,sBAC3CxJ,WAAa5B,EAAKkI,KAAKtG,SACrC,OACCvC,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,OAAOmJ,QAAS,kBAAMR,GAAY,KAAlD,SAC3B/I,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,SAASmJ,QAAS,kBAAMyB,EAAcrK,KAAtD,YAqGvBqL,CAAqBrL,OAM3BX,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,WA5DiB,WAGlB,IAAM+L,EAAkB,CAACC,QAAS1B,EAAoB,OAAS,IACzD2B,EAAkB,CAACD,QAAS1B,EAAoB,GAAK,QAC3D,OACCxK,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKuL,MAAOQ,GACXjM,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQC,QAAS,kBAAMkB,GAAqB,KAA5C,kBAEDzK,EAAAC,EAAAC,cAAA,OAAKuL,MAAOU,GACXnM,EAAAC,EAAAC,cAAC+I,EAAA,EAAD,CAAMC,SAAUhB,GACflI,EAAAC,EAAAC,cAAC+I,EAAA,EAAKE,MAAN,KACCnJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,2CACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CAAc9C,KAAK,OAAOuC,KAAK,UAAUsD,GAAG,WAAWC,KAAK,MAC5DrM,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,UAAUmG,KAAK,UAA/B,UAJD,IAIyDvG,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ/C,KAAK,SAAb,WAG1DvG,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQC,QAAS,kBAAMkB,GAAqB,KAA5C,YAyCD6B,GACDtM,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,WACqB,IAApBU,EAASC,OACTb,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,0EAGDF,EAAAC,EAAAC,cAAA,WACEU,EAASsB,IAAI,SAAAqJ,GACb,OACCvL,EAAAC,EAAAC,cAAA,OAAKuL,MAAO/B,EAAWvH,IAAKvB,EAAS2L,QAAQhB,IAAWA,MAK5DvL,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAG,UAASxB,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,sBCpIN3J,cAPS,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,QAIAZ,CAxDD,SAACG,GACd,IAAM0M,EAAY1M,EAAMS,MAAMM,OACxB4L,EAAc3M,EAAMS,MAAMG,OAAO,SAAAmI,GAAI,OAA0B,IAAtBA,EAAKvI,MAAMO,SACpD6L,EAAiB5M,EAAMQ,MAAMI,OAAO,SAAAC,GAAI,OAA6B,IAAzBA,EAAKC,SAASC,SAC1D8L,EAAgBD,EAAexK,IAAI,SAAAvB,GAAI,OAAIA,EAAKC,SAASC,SAAQ+L,OAAO,SAAC3M,EAAG6B,GAAJ,OAAU7B,EAAI6B,GAAG,GAE/F,OACC9B,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,wBAAgBsM,EAAhB,+BAAwDC,EAAY5L,OAApE,iBAA0F,IAAMgM,SAASJ,EAAY5L,QAAWgM,SAASL,IAAaM,QAAQ,GAA9J,QAC3B9M,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,kDAA0CyM,EAA1C,gCAAsFD,EAAe7L,OAArG,YAC3Bb,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,mDACJF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAO8K,SAAO,GACb/M,EAAAC,EAAAC,cAAA,SAAOuL,MAAO,CACb9B,WAAY,GACZC,YAAa,EACbC,OAAQ,QACRC,YAAa,EACbC,aAAc,IAEd/J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,8BAGFF,EAAAC,EAAAC,cAAA,aACEJ,EAAMS,MAAM2B,IAAI,SAAA2G,GAChB,OACC7I,EAAAC,EAAAC,cAAA,MAAIiC,IAAK0G,EAAKnH,IACb1B,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYoH,EAAKnH,KAAOmH,EAAKtG,WAEtCvC,EAAAC,EAAAC,cAAA,UAAK2I,EAAKvI,MAAMO,QAChBb,EAAAC,EAAAC,cAAA,WAAM,IAAM2I,EAAKvI,MAAMO,OAASf,EAAMQ,MAAMO,QAAQiM,QAAQ,YCoBrDnN,cARS,SAACC,EAAO6J,GAC/B,IAAMZ,EAAOY,EAASZ,KACtB,MAAO,CACNtI,MAAOX,EAAMW,MACbsI,SAIalJ,CA1DF,SAACG,GACb,IAAM+I,EAAO/I,EAAM+I,KAEnB,YAAa1H,IAAT0H,EACI,KAGP7I,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sBAAc2I,EAAKnH,IACnB1B,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,uBAAkB2I,EAAKtG,UAC1BvC,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,mBAAc2I,EAAKC,MACtB9I,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAO8K,SAAO,GACb/M,EAAAC,EAAAC,cAAA,SAAOuL,MAAO,CACb9B,WAAY,GACZC,YAAa,EACbC,OAAQ,QACRC,YAAa,EACbC,aAAc,IAEd/J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,sBAGFF,EAAAC,EAAAC,cAAA,aACE2I,EAAKvI,MAAM4B,IAAI,SAAAvB,GACf,OACCX,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IACb1B,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYd,EAAKe,KAAOf,EAAKgB,QAEtC3B,EAAAC,EAAAC,cAAA,UAAKS,EAAK6H,aAMfxI,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,mBAAW2I,EAAKvI,MAAMO,OAAtB,UACAb,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAG,UAASxB,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,qBC3BN0D,EAAA,CAACpK,OArBD,WAEd,OADgBY,IAAMC,IAJP,eAKAwJ,KAAK,SAAA9J,GAAQ,OAAIA,EAASS,QAmBlBH,IAhBZ,SAAAoF,GAEX,OADiBrF,IAAMC,IATR,cASsBoF,EAAKnH,IAC1BkC,MAcYgB,OAXjB,eAAA/B,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAM6B,GAAN,IAAA5B,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACSC,IAAM4B,KAdd,cAc4BL,GAD7B,cACR5B,EADQE,EAAAK,KAAAL,EAAAM,OAAA,SAEPR,EAASS,MAFF,wBAAAP,EAAAQ,SAAAX,MAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GAWyBsB,OANzB,eAAArB,EAAAnB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAiB,EAAMuB,GAAN,IAAAtC,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACSC,IAAMmC,IAnBd,cAmB4BF,EAAc/D,GAAI+D,GAD/C,cACRtC,EADQgB,EAAAT,KAAAS,EAAAR,OAAA,SAEPR,EAASS,MAFF,wBAAAO,EAAAN,SAAAK,MAAH,gBAAAO,GAAA,OAAAR,EAAAH,MAAAC,KAAAC,YAAA,ICqCGkJ,EAnBK,WAAwB,IAAvBtN,EAAuBoE,UAAAnD,OAAA,QAAAM,IAAA6C,UAAA,GAAAA,UAAA,GAAf,GAAI0C,EAAW1C,UAAAnD,OAAA,EAAAmD,UAAA,QAAA7C,EAC3C,OAAQuF,EAAOH,MACf,IAAK,WACJ,IAAM4G,EAAazG,EAAO9C,KAC1B,OAAOhE,EAAM6B,OAAO0L,GAAYtL,KAAK,SAAC5B,EAAG6B,GACxC,OAAOA,EAAEC,MAAQ9B,EAAE8B,QAErB,IAAK,cACJ,IAAM8F,EAAenB,EAAO9C,KAC5B,OAAOhE,EAAMc,OAAO,SAAAmI,GAAI,OAAIA,EAAKnH,KAAOmG,EAAanG,KACtD,IAAK,aACJ,OAAOgF,EAAO9C,KAAK/B,KAAK,SAAC5B,EAAG6B,GAC3B,OAAOA,EAAExB,MAAMO,OAASZ,EAAEK,MAAMO,SAElC,QACC,OAAOjB,IC+CHqI,EAAqB,CAC1BmF,QDhGsB,SAAAC,GACtB,sBAAAxK,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAC,EAAMoD,GAAN,IAAAgH,EAAA,OAAAtK,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACkBgK,EAAY3I,OAAOyI,GADrC,OACAC,EADAjK,EAAAK,KAEN4C,EAAS,CACRC,KAAM,WACN3C,KAAM0J,IAJD,wBAAAjK,EAAAQ,SAAAX,MAAP,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,ICgGA2C,qBACAR,eAGcqD,cAAW7J,YAbF,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,QAUoC0H,EAAzBtI,CAjGJ,SAACG,GAEtB,IAAMoI,EAAa,eAAArF,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAOiF,GAAP,IAAA5F,EAAAuG,EAAA0E,EAAAC,EAAAC,EAAA,OAAA1K,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACrB4E,EAAMG,iBACA/F,EAAW4F,EAAMI,OAAOhG,SAASkG,MAAMC,OAEvCI,EAA0C,KAAnCX,EAAMI,OAAOO,KAAKL,MAAMC,OAAgB,cAAgBP,EAAMI,OAAOO,KAAKL,MACjF+E,EAAWrF,EAAMI,OAAOiF,SAAS/E,MAAMC,OACvC+E,EAAYtF,EAAMI,OAAOkF,UAAUhF,MAAMC,OAE/CP,EAAMI,OAAOhG,SAASkG,MAAQ,GAC9BN,EAAMI,OAAOO,KAAKL,MAAQ,GAC1BN,EAAMI,OAAOiF,SAAS/E,MAAQ,GAC9BN,EAAMI,OAAOkF,UAAUhF,MAAQ,GAE3B+E,IAAaC,EAbI,CAAApK,EAAAE,KAAA,SAcpBzD,EAAMqG,YAAY,4BAA6B,GAd3B9C,EAAAE,KAAA,wBAiBdmK,EAAgB,CACrBnL,WACAuG,OACA0E,YApBmBnK,EAAAC,KAAA,GAAAD,EAAAE,KAAA,GAwBbzD,EAAMsN,QAAQM,GAxBD,QAyBnB5N,EAAM6G,mBAAN,gBAAAlF,OAAyCc,EAAzC,2BAA4E,GAC5EzC,EAAMqL,QAAQC,KAAK,UA1BA/H,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA2F,GAAA3F,EAAA,UA+BF,KAAbd,GAAgC,KAAbiL,EACtB1N,EAAMqG,YAAY,wCAAyC,GAEnDrG,EAAMS,MAAMG,OAAO,SAAAmI,GAAI,OAAIA,EAAKtG,WAAaA,IAAU1B,OAAS,EACxEf,EAAMqG,YAAN,aAAA1E,OAA+Bc,EAA/B,uBAA8D,GAEtDA,EAAS1B,OAAS,IAAM0B,EAAS1B,OAAS,EAClDf,EAAMqG,YAAY,2CAA4C,IAEtDqH,EAAS3M,OAAS,IAAM2M,EAAS3M,OAAS,IAClDf,EAAMqG,YAAY,2CAA4C,GAzC5C,yBAAA9C,EAAAQ,SAAAX,EAAA,mBAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GA+CnB,OACChE,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAA,wBAAJ,0FACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+I,EAAA,EAAD,CAAMC,SAAUhB,GACflI,EAAAC,EAAAC,cAAC+I,EAAA,EAAKE,MAAN,KACCnJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,iCACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,aAEN9I,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,yBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,SAEN9I,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,iCACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,WACLuC,KAAK,aAEN9I,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,yBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,WACLuC,KAAK,cAEN9I,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,UAAUmG,KAAK,UAA/B,UAtBD,IAsByDvG,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ/C,KAAK,SAAb,eCzE9CoH,EAVA,kBACd3N,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,6BAAoBF,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,8BAAR,mBAApB,cAAuF1L,EAAAC,EAAAC,cAAA,KAAGwL,KAAK,8BAAR,2BACvF1L,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,iCCAa0N,EAAA,CAACC,MALL,eAAAhL,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAO4K,GAAP,IAAA3K,EAAA,OAAAH,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACUC,IAAM4B,KAHd,aAG4B0I,GAD9B,cACP3K,EADOE,EAAAK,KAAAL,EAAAM,OAAA,SAENR,EAASS,MAFH,wBAAAP,EAAAQ,SAAAX,MAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,ICoCI+J,EAXM,WAAwB,IAAvBnO,EAAuBoE,UAAAnD,OAAA,QAAAM,IAAA6C,UAAA,GAAAA,UAAA,GAAf,GAAI0C,EAAW1C,UAAAnD,OAAA,EAAAmD,UAAA,QAAA7C,EAC5C,OAAQuF,EAAOH,MACf,IAAK,eACJ,OAAO3G,EAAM6B,OAAOiF,EAAO9C,MAC5B,IAAK,cACJ,MAAe,GAChB,QACC,OAAOhE,ICgBHqI,EAAqB,CAC1B+F,YD/C0B,SAACzL,EAAUiL,GACrC,sBAAA3K,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAC,EAAMoD,GAAN,IAAA2H,EAAA,OAAAjL,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACqB2K,EAAaL,MAAM,CAACtL,WAAUiL,aADnD,OACAS,EADA5K,EAAAK,KAENuH,OAAOa,aAAaqC,QACnB,oBAAqBvC,KAAKwC,UAAUH,IAErCjH,EAAYtC,SAASuJ,EAAavL,OAClC4D,EAAS,CACRC,KAAM,eACN3C,KAAMqK,IARD,wBAAA5K,EAAAQ,SAAAX,MAAP,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,IC+CAmC,cACAQ,sBAGc6C,cAAW7J,YAAQ,KAAMsI,EAAdtI,CAhDR,SAACG,GAElB,IAAMoI,EAAa,eAAArF,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAOiF,GAAP,IAAA5F,EAAAiL,EAAA,OAAAxK,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrB4E,EAAMG,iBACA/F,EAAW4F,EAAMI,OAAO,GAAGE,MAC3B+E,EAAWrF,EAAMI,OAAO,GAAGE,MACjCN,EAAMI,OAAO,GAAGE,MAAQ,GAJHpF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAMdzD,EAAMkO,YAAYzL,EAAUiL,GANd,OAOpB1N,EAAM6G,mBAAN,yCAAAlF,OAAkEc,EAAlE,KAA+E,GAC/EzC,EAAMqL,QAAQC,KAAK,KARC/H,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA2F,GAAA3F,EAAA,SAWpBvD,EAAMqG,YAAY,+BAAgC,GAX9B,yBAAA9C,EAAAQ,SAAAX,EAAA,kBAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GAenB,OACChE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAoO,SAAA,KACArO,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+I,EAAA,EAAD,CAAMC,SAAUhB,GACflI,EAAAC,EAAAC,cAAC+I,EAAA,EAAKE,MAAN,KACCnJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,kBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,aAEN9I,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,kBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,aAENvG,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ5H,GAAG,cAActB,QAAQ,UAAUmG,KAAK,UAAhD,SAXD,IAWyEvG,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ/C,KAAK,SAAb,eCqDtE0B,EAAqB,CAC1BqG,QZpFsB,SAAAC,GACtB,sBAAAtK,EAAAnB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAiB,EAAMoC,GAAN,IAAAkI,EAAA,OAAAxL,EAAA/C,EAAAmD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACkByD,EAAYpC,OAAO2J,GADrC,OACAC,EADArK,EAAAT,KAEN4C,EAAS,CACRC,KAAM,WACN3C,KAAKd,OAAA6E,EAAA,EAAA7E,CAAA,GAAK0L,EAAN,CACH3F,KAAM,CACLtG,SAAUgM,EAAQ1F,KAAKtG,SACvBsG,KAAM0F,EAAQ1F,KAAKA,KACnBnH,GAAI6M,EAAQ1F,KAAKnH,QARd,wBAAAyC,EAAAN,SAAAK,MAAP,gBAAAO,GAAA,OAAAR,EAAAH,MAAAC,KAAAC,YAAA,IYoFA2C,qBACAR,eAGcxG,cAZS,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,QAUyB2H,EAAzBtI,CA/FE,SAACG,GAEjB,IAAMoI,EAAa,eAAArF,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAG,SAAAC,EAAOiF,GAAP,IAAAsG,EAAAC,EAAA9G,EAAA,OAAA5E,EAAA/C,EAAAmD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrB4E,EAAMG,iBAEAmG,EAAa7C,KAAKC,MAAMZ,OAAOa,aAAaC,QAAQ,sBACpD2C,EAAWvG,EAAMI,OAAO,GAAGE,MAC3Bb,EAAa,CAClBjG,MAAOwG,EAAMI,OAAO,GAAGE,MACvBD,OAAQL,EAAMI,OAAO,GAAGE,MACxBE,KAAsC,IAAjC+F,EAAS9F,OAAO,YAAqB,WAAa8F,EAAWA,EAElE3M,MAAiC,KAA1BoG,EAAMI,OAAO,GAAGE,MAAe,EAAIoE,SAAS1E,EAAMI,OAAO,GAAGE,OACnEI,KAAM,CACLnH,GAAI+M,EAAW/M,GACfoH,KAAM2F,EAAW3F,KACjBvG,SAAUkM,EAAWlM,WAGvB4F,EAAMI,OAAO5G,MAAM8G,MAAQ,GAC3BN,EAAMI,OAAOC,OAAOC,MAAQ,GAC5BN,EAAMI,OAAOI,IAAIF,MAAQ,GACzBN,EAAMI,OAAOxG,MAAM0G,MAAQ,GApBNpF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAuBdzD,EAAMwO,QAAQ1G,GAvBA,QAwBpB9H,EAAM6G,mBAAN,eAAAlF,OAAwCmG,EAAWjG,MAAnD,SAAAF,OAAgEmG,EAAWY,OAA3E,qCAAsH,GACtH1I,EAAM6O,mBAAkB,GAzBJtL,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAA2F,GAAA3F,EAAA,SA6BK,KAArBuE,EAAWjG,OAAsC,KAAtBiG,EAAWY,QAAoC,KAAnBZ,EAAWe,IACrE7I,EAAMqG,YAAY,wCAAyC,GACnDrG,EAAMQ,MAAMkH,KAAK,SAAA7G,GAAI,OAAIiH,EAAWjG,QAAUhB,EAAKgB,QAC3D7B,EAAMqG,YAAN,kBAAA1E,OAAoCmG,EAAWjG,MAA/C,kCAAsF,GAElD,kBAArBiG,EAAW7F,OAAsB6F,EAAW7F,MAAQ,IAAM6M,OAAOC,UAAUjH,EAAW7F,OACrGjC,EAAMqG,YAAY,iDAAkD,GAC5DyB,EAAWjG,MAAMd,OAAS,KAAO+G,EAAWY,OAAO3H,OAAS,IAAM+G,EAAWe,IAAI9H,OAAS,IAClGf,EAAMqG,YAAY,oGAAqG,GAC/GyB,EAAW7F,MAAQ,MAC3BjC,EAAMqG,YAAY,wDAAyD,GAvCxD,yBAAA9C,EAAAQ,SAAAX,EAAA,kBAAH,gBAAAkB,GAAA,OAAAvB,EAAAiB,MAAAC,KAAAC,YAAA,GA2CnB,OACChE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAoO,SAAA,KACArO,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+I,EAAA,EAAD,CAAMC,SAAUhB,GACflI,EAAAC,EAAAC,cAAC+I,EAAA,EAAKE,MAAN,KACCnJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,eACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,QACLpH,GAAG,UAEJ1B,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,gBACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,SACLpH,GAAG,WAEJ1B,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,aACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,MACLpH,GAAG,QAEJ1B,EAAAC,EAAAC,cAAC+I,EAAA,EAAKG,MAAN,0BACApJ,EAAAC,EAAAC,cAAC+I,EAAA,EAAKI,QAAN,CACC9C,KAAK,OACLuC,KAAK,QACLpH,GAAG,UAEJ1B,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ5H,GAAG,OAAOtB,QAAQ,UAAUmG,KAAK,UAAzC,QA1BD,IA0BiEvG,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQ/C,KAAK,SAAb,cC6CrD5G,eANS,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,QAIAX,CA3HG,SAACG,GAAU,IAAAmK,EAEUC,mBAAS,IAFnBC,EAAArH,OAAAsH,EAAA,EAAAtH,CAAAmH,EAAA,GAErB6E,EAFqB3E,EAAA,GAER4E,EAFQ5E,EAAA,GAAAG,EAGYJ,mBAAS,IAHrBK,EAAAzH,OAAAsH,EAAA,EAAAtH,CAAAwH,EAAA,GAGrB0E,EAHqBzE,EAAA,GAGP0E,EAHO1E,EAAA,GA8F5B,OACCvK,EAAAC,EAAAC,cAAA,WAtECF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,YACCF,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,SAAO4I,KAAK,QAAQoG,SAhBC,SAAC/G,GAC3BA,EAAMG,iBACNyG,EAAe5G,EAAMI,OAAOE,QAc2B0G,YAAY,QAAQxD,KAAK,QAC9E3L,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,SAAO4I,KAAK,SAASoG,SAZC,SAAC/G,GAC5BA,EAAMG,iBACN2G,EAAgB9G,EAAMI,OAAOE,QAU4B0G,YAAY,SAASxD,KAAK,QACjF3L,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQlJ,QAAQ,UAAUmG,KAAK,QAAQgD,QAvBrB,WACpBwF,EAAe,IACfE,EAAgB,MAqBd,WAmEFjP,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAO8K,SAAO,GACb/M,EAAAC,EAAAC,cAAA,SAAOuL,MAAO,CACb9B,WAAY,GACZC,YAAa,EACbC,OAAQ,QACRC,YAAa,EACbC,aAAc,IAEd/J,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,sBAxEe,SAACI,GAIpB,GAAoB,KAAhBwO,GAAuC,KAAjBE,EACzB,OACChP,EAAAC,EAAAC,cAAA,aACEI,EAAM4B,IAAI,SAAAvB,GACV,OACCX,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IACb1B,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYd,EAAKe,KAAOf,EAAKgB,QAEtC3B,EAAAC,EAAAC,cAAA,UAAKS,EAAK6H,YAWf,IAQM4G,EARgB9O,EAAM4B,IAAI,SAAAvB,GAG/B,IAAqB,IAFFA,EAAKgB,MAAM0N,cACCzG,OAAOkG,EAAYO,eAEjD,OAAO1O,IACND,OAAO,SAAAC,GAAI,YAAaQ,IAATR,IAGmBuB,IAAI,SAAAvB,GAGxC,IAAqB,IAFDA,EAAK6H,OAAO6G,cACAzG,OAAOoG,EAAaK,eAEnD,OAAO1O,IACND,OAAO,SAAAC,GAAI,YAAaQ,IAATR,IAElB,OACCX,EAAAC,EAAAC,cAAA,aAEEkP,EAAelN,IAAI,SAAAvB,GACnB,OACCX,EAAAC,EAAAC,cAAA,MAAIiC,IAAKxB,EAAKe,IACb1B,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAE,UAAAC,OAAYd,EAAKe,KAAOf,EAAKgB,QAEtC3B,EAAAC,EAAAC,cAAA,UAAKS,EAAK6H,YA2Bb8G,CAAYxP,EAAMQ,WC5FjB2H,GAAqB,CAC1BsH,WJPyB,WACzB,sBAAAtL,EAAAnB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAiB,EAAMoC,GAAN,OAAAtD,EAAA/C,EAAAmD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,OACN0H,OAAOa,aAAa0D,WAAW,qBAC/BlJ,EAAS,CACRC,KAAM,gBAHD,wBAAApC,EAAAN,SAAAK,MAAP,gBAAAO,GAAA,OAAAR,EAAAH,MAAAC,KAAAC,YAAA,KIScwF,eAAW7J,YAAQ,KAAMsI,GAAdtI,CAtBX,SAACG,GAUf,OACCE,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,cAAb,gBAAwCtC,EAAM+I,KAAKtG,SAAnD,KAA+DzC,EAAM+I,KAAKC,KAA1E,KAAiF9I,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQqC,KAAK,KAAKpC,QAXhF,SAACpB,GAErBA,EAAMG,iBACN2C,OAAOa,aAAa0D,WAAW,qBAC/B1P,EAAMyP,aACNzP,EAAM2P,QAAQ,MACd3P,EAAMqL,QAAQC,KAAK,YAK+D,WACjFpL,EAAAC,EAAAC,cAAA,eCoOG+H,GAAqB,CAC1ByH,afvM2B,WAC3B,sBAAAnK,EAAAzC,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAuC,EAAMc,GAAN,IAAAqJ,EAAA,OAAA3M,EAAA/C,EAAAmD,KAAA,SAAAsC,GAAA,cAAAA,EAAApC,KAAAoC,EAAAnC,MAAA,cAAAmC,EAAAnC,KAAA,EACiByD,EAAYpE,SAD7B,OACA+M,EADAjK,EAAAhC,KAEN4C,EAAS,CACRC,KAAM,aACN3C,KAAM+L,IAJD,wBAAAjK,EAAA7B,SAAA2B,MAAP,gBAAAU,GAAA,OAAAX,EAAAzB,MAAAC,KAAAC,YAAA,IeuMA4L,aT/N2B,WAC3B,sBAAAtL,EAAAxB,OAAAC,EAAA,EAAAD,CAAAE,EAAA/C,EAAAgD,KAAO,SAAAsB,EAAM+B,GAAN,IAAAuJ,EAAA,OAAA7M,EAAA/C,EAAAmD,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAAiB,EAAAjB,KAAA,EACiBgK,EAAY3K,SAD7B,OACAiN,EADArL,EAAAd,KAEN4C,EAAS,CACRC,KAAM,aACN3C,KAAMiM,IAJD,wBAAArL,EAAAX,SAAAU,MAAP,gBAAAc,GAAA,OAAAf,EAAAR,MAAAC,KAAAC,YAAA,KSiOcrE,eAbS,SAACC,GACxB,MAAO,CACNU,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,MACbsN,MAAOjO,EAAMiO,QASyB5F,GAAzBtI,CApOH,SAACG,GAAU,IAAAmK,EACEC,mBAAS,MADXC,EAAArH,OAAAsH,EAAA,EAAAtH,CAAAmH,EAAA,GACfpB,EADesB,EAAA,GACTsF,EADStF,EAAA,GAAAG,EAEsBJ,oBAAS,GAF/BK,EAAAzH,OAAAsH,EAAA,EAAAtH,CAAAwH,EAAA,GAEfwF,EAFevF,EAAA,GAECoE,EAFDpE,EAAA,GAItBM,oBAAU,WAGT/K,EAAM4P,eACN5P,EAAM8P,gBACJ,IAEH/E,oBAAU,WACT,IAAMkF,EAAiB9E,OAAOa,aAAaC,QAAQ,qBACnD,GAAIgE,EAAgB,CACnB,IAAMlH,EAAO+C,KAAKC,MAAMkE,GACxBN,EAAQ5G,GACR7B,EAAYtC,SAASmE,EAAKnG,SAEzB,CAAC5C,EAAM+N,QAEV,IAgCMmC,EAAalQ,EAAMQ,MAAMO,OACzB4L,EAAc3M,EAAMS,MAAMG,OAAO,SAAAmI,GAAI,OAA0B,IAAtBA,EAAKvI,MAAMO,SACpDoP,EAAU,CAACA,QAAS,IAE1B,OACCjQ,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,aACdpC,EAAAC,EAAAC,cAACqB,EAAA,EAAD,KACW,OAATsH,EAIA7I,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,qCACApC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAG,UAASxB,EAAAC,EAAAC,cAAA,mBAAvB,kBAAyDF,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMC,GAAG,kBAAiBxB,EAAAC,EAAAC,cAAA,oBAAnF,iBAC5BF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uCAA+B8P,EAA/B,aAAqDvD,EAAY5L,OAAjE,aAChCb,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uBAAeJ,EAAMS,MAAMM,OAA3B,yCAKhCb,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,KACClQ,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,OAAQ,kBAClCrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAACsQ,EAAD,UAGFxQ,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,iBAAiBC,OAAQ,kBAC1CrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,wBACApC,EAAAC,EAAAC,cAACuQ,EAAD,YAMJzQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WAECF,EAAAC,EAAAC,cAACwQ,EAAA,EAAD,CAAQC,kBAAgB,EAACC,OAAO,KAAKC,GAAG,OAAOzQ,QAAQ,QACtDJ,EAAAC,EAAAC,cAACwQ,EAAA,EAAOI,OAAR,CAAeC,gBAAc,0BAC7B/Q,EAAAC,EAAAC,cAACwQ,EAAA,EAAOM,MAAR,CAActF,KAAK,KAAnB,gBACA1L,EAAAC,EAAAC,cAACwQ,EAAA,EAAOO,SAAR,CAAiBvP,GAAG,yBACnB1B,EAAAC,EAAAC,cAACgR,EAAA,EAAD,CAAK9O,UAAU,WACdpC,EAAAC,EAAAC,cAACgR,EAAA,EAAIC,KAAL,CAAUzF,KAAK,QAAQU,GAAG,QACzBpM,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMkK,MAAOwE,EAASzO,GAAG,KAAzB,SAEDxB,EAAAC,EAAAC,cAACgR,EAAA,EAAIC,KAAL,CAAUzF,KAAK,SAASU,GAAG,QAC1BpM,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMkK,MAAOwE,EAASzO,GAAG,UAAzB,UAEDxB,EAAAC,EAAAC,cAACgR,EAAA,EAAIC,KAAL,CAAUzF,KAAK,SAASU,GAAG,QAC1BpM,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMkK,MAAOwE,EAASzO,GAAG,UAAzB,UAEDxB,EAAAC,EAAAC,cAACgR,EAAA,EAAIC,KAAL,CAAUzF,KAAK,SAASU,GAAG,QAC1BpM,EAAAC,EAAAC,cAACqB,EAAA,EAAD,CAAMkK,MAAOwE,EAASzO,GAAG,UAAzB,cAMLxB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACkR,GAAD,CAAQvI,KAAMA,EAAM4G,QAASA,IAC7BzP,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,KACClQ,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAC7BrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,sBACApC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,iDAC3BF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,iEAC3BF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,oEAA2DF,EAAAC,EAAAC,cAAA,6CAA3D,+DAC3BF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,2DAC3BF,EAAAC,EAAAC,cAACmR,EAAD,CAAMxI,KAAMA,EAAM4G,QAASA,QAG7BzP,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,OAAQ,kBAClCrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,YACApC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,eAAcpC,EAAAC,EAAAC,cAAA,yCAAiC8P,EAAjC,aAAuDvD,EAAY5L,OAAnE,YAC3Bb,EAAAC,EAAAC,cAAA,WAhIS,WAEhB,IAAM+L,EAAkB,CAACC,QAAS4D,EAAiB,OAAS,IACtD3D,EAAkB,CAACD,QAAS4D,EAAiB,GAAK,QACxD,OACC9P,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKuL,MAAOQ,GACXjM,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQC,QAAS,kBAAMoF,GAAkB,KAAzC,mBAED3O,EAAAC,EAAAC,cAAA,OAAKuL,MAAOU,GACXnM,EAAAC,EAAAC,cAACoR,EAAD,CAAU3C,kBAAmBA,IAC7B3O,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAQC,QAAS,kBAAMoF,GAAkB,KAAzC,YAsHK4C,GACDvR,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAACsR,GAAD,UAGFxR,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAaC,OAAQ,SAAAxN,GAAA,IAzG3BnB,EAyG6B+P,EAAF5O,EAAE4O,MAAF,OACtCzR,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAACwR,EAAD,CAAM/Q,MA7GIe,EA6GW+P,EAAME,OAAOjQ,GA5GzC5B,EAAMQ,MAAMkH,KAAK,SAAA7G,GAAI,OAAIA,EAAKe,KAAOA,WA+GhC1B,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,OAAQ,kBAClCrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAACoQ,EAAD,MACAtQ,EAAAC,EAAAC,cAACqQ,EAAD,MACAvQ,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,SACApC,EAAAC,EAAAC,cAAC0R,EAAD,UAGF5R,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,aAAaC,OAAQ,SAAApM,GAAA,IA1H3BvC,EA0H6B+P,EAAFxN,EAAEwN,MAAF,OACtCzR,EAAAC,EAAAC,cAAC2R,EAAD,CAAMhJ,MA3HKnH,EA2HU+P,EAAME,OAAOjQ,GA1HxC5B,EAAMS,MAAMiH,KAAK,SAAAqB,GAAI,OAAIA,EAAKnH,KAAOA,UA4HhC1B,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,SAASC,OAAQ,kBAClCrQ,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,iBACApC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,2YAMAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,0ZAMAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,qGAEGF,EAAAC,EAAAC,cAAA,KAAGwL,KAAM,kCAAT,0BAFH,KAIA1L,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,uKAMFF,EAAAC,EAAAC,cAACgQ,EAAA,EAAD,CAAO4B,UAxKG,kBAEf9R,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,OACApC,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,eAAd,qDAuKApC,EAAAC,EAAAC,cAAC6R,EAAD,2BC7NGC,GAAUC,aAAgB,CAC/B3R,MAAOgH,EACP/G,MAAO2M,EACPW,MAAOE,EACPlO,aAAcgH,EACdxG,MAAOoG,IAGFyL,GAAQC,aAAYH,GAASI,aAAgBC,OAE7ChC,GAAS,WACdiC,IAASjC,OACRrQ,EAAAC,EAAAC,cAACqS,EAAA,EAAD,CAAUL,MAAOA,IAChBlS,EAAAC,EAAAC,cAACsS,GAAD,OAEDC,SAASC,eAAe,UAI1BrC,KACA6B,GAAMS,UAAUtC","file":"static/js/main.d49ae855.chunk.js","sourcesContent":["import React from \"react\"\r\nimport {Alert} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\n\r\nconst Notification = (props) => {\r\n\tconst message = props.notification\r\n\tif (message === null) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{(message &&\r\n\t\t\t\t<Alert variant=\"success\">\r\n\t\t\t\t\t{message}\r\n\t\t\t\t</Alert>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tnotification: state.notification\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Notification)","import React from \"react\"\r\nimport {Alert} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\n\r\nconst Errormessage = (props) => {\r\n\tconst message = props.error\r\n\r\n\tif (message === null) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{(message &&\r\n\t\t\t\t<Alert variant=\"danger\">\r\n\t\t\t\t\t{message}\r\n\t\t\t\t</Alert>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\terror: state.error\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Errormessage)","import React from \"react\"\r\nimport {connect} from \"react-redux\"\r\nimport {Link} from \"react-router-dom\"\r\nimport {Table} from \"react-bootstrap\"\r\n\r\n//Component which displays the home page\r\n//Includes several subcomponents, which show most popular blogs etc.\r\nconst Home = (props) => {\r\n\r\n\tconst topFive = (blogs) => {\r\n\t\tconst sortedBlogs = blogs.sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\t\tconst slicedBlogs = sortedBlogs.slice(0, 5)\r\n\t\tif (slicedBlogs === undefined) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{slicedBlogs.map(blog => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<tr key={blog.id}>\r\n\t\t\t\t\t\t\t\t\t<td key={blog.id}><Link to={`/blogs/${blog.id}`}>{blog.title}</Link></td>\r\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{blog.likes} likes</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mostActive = (users) => {\r\n\t\tconst sortedUsers = users.sort((a, b) => {\r\n\t\t\treturn b.blogs.length - a.blogs.length\r\n\t\t})\r\n\t\t//Found it simpler to get the top user by .sort instead of Math.max() or similar\r\n\t\t//This component should be improved so that is shows multiple users if there are more than one\r\n\t\t//users with the same amount of added blogs as now it only shows the one which is first alphabetically\r\n\t\tconst topUser = sortedUsers[0]\r\n\r\n\t\tif (topUser === undefined) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<p><big><u><Link to={`/users/${topUser.id}`}>{topUser.username}</Link></u> with {topUser.blogs.length} added blogs!</big></p>\r\n\t\t)\r\n\t}\r\n\r\n\tconst randomComments = (blogs) => {\r\n\t\t//Filter to an array with only blogs that have comments\r\n\t\tconst blogsWithComments = blogs.filter(blog => blog.comments.length !== 0)\r\n\t\tconst randomNumMax1 = blogsWithComments.length\r\n\t\t//Randomly choose one of the blogs\r\n\t\tconst chosenBlog = Math.floor(Math.random() * randomNumMax1)\r\n\t\t//This if statement is to prevent crashing if blogs have not yet been loaded from store\r\n\t\tif (blogsWithComments[chosenBlog] === undefined) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tconst randomNumMax2 = blogsWithComments[chosenBlog].comments.length\r\n\t\t//Randomly choose one of the comments in the chosen blog\r\n\t\tconst chosenComment = Math.floor(Math.random() * randomNumMax2)\r\n\t\tconst randomComment = blogsWithComments[chosenBlog].comments[chosenComment]\r\n\t\tif (randomComment === undefined) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t{randomComment}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<p>From <Link to={`/blogs/${blogsWithComments[chosenBlog].id}`}>{blogsWithComments[chosenBlog].title}</Link></p>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t<div>\r\n\t\t\t\t<h2>5 most popular blogs</h2>\r\n\t\t\t\t<br />\r\n\t\t\t\t{topFive(props.blogs)}\r\n\t\t\t\t<br />\r\n\t\t\t\t<h2>Most active user</h2>\r\n\t\t\t\t<br />\r\n\t\t\t\t{mostActive(props.users)}\r\n\t\t\t\t<br />\r\n\t\t\t\t<h4>To get you in the mood for some uncivilized discussion, here are some randomly picked comments across all blogs</h4>\r\n\t\t\t\t<br />\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{/*Each randomComments render produces independent, (hopefully) different results*/}\r\n\t\t\t\t\t\t{randomComments(props.blogs)}\r\n\t\t\t\t\t\t{randomComments(props.blogs)}\r\n\t\t\t\t\t\t{randomComments(props.blogs)}\r\n\t\t\t\t\t\t{randomComments(props.blogs)}\r\n\t\t\t\t\t\t{randomComments(props.blogs)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs,\r\n\t\tusers: state.users\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Home)","import axios from \"axios\"\r\nconst baseUrl = \"/api/blogs/\"\r\n\r\nlet token = null\r\n\r\n//This function is called on login so that the token is saved\r\nconst setToken = newToken => {\r\n\ttoken = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = async () => {\r\n\tconst response = await axios.get(baseUrl)\r\n\treturn response.data\r\n}\r\n\r\nconst get = async blog => {\r\n\tconst response = await axios.get(baseUrl + blog.id)\r\n\treturn response.data\r\n}\r\n\r\nconst getComments = async blog => {\r\n\tconst response = await axios.get(baseUrl + blog.id + \"/comments\")\r\n\treturn response.data\r\n}\r\n\r\nconst create = async newObject => {\r\n\tconst config = {\r\n\t\theaders: {Authorization: token}\r\n\t}\r\n\tconst response = await axios.post(baseUrl, newObject, config)\r\n\treturn response.data\r\n}\r\n\r\nconst update = async updatedObject => {\r\n\tconst response = await axios.put(baseUrl + updatedObject.id, updatedObject)\r\n\treturn response.data\r\n}\r\n\r\nconst remove = async (id) => {\r\n\tconst config = {\r\n\t\theaders: {Authorization: token}\r\n\t}\r\n\tconst response = await axios.delete(baseUrl + id, config)\r\n\treturn response.data\r\n}\r\n\r\nexport default {getAll, get, getComments, setToken, create, update, remove}","//Reducer and all of the action creators involving state.errors\r\n\r\nconst errorAtStart = null\r\n\r\nexport const errorChange = (errorMsg, displayTime) => {\r\n\treturn async dispatch => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"CHANGE_ERROR\",\r\n\t\t\terror: errorMsg\r\n\t\t})\r\n\t\tsetTimeout(() => dispatch({\r\n\t\t\ttype: \"CHANGE_ERROR\",\r\n\t\t\terror: null\r\n\t\t}), displayTime * 1000)\r\n\t}\r\n}\r\n\r\nconst errorReducer = (state = errorAtStart, action) => {\r\n\tswitch (action.type) {\r\n\tcase \"CHANGE_ERROR\":\r\n\t\treturn action.error\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default errorReducer","//Reducer and all of the action creators involving state.notification\r\n\r\nconst notificationAtStart = null\r\n\r\nexport const notificationChange = (notificationMsg, displayTime) => {\r\n\treturn async dispatch => {\r\n\t\tawait dispatch({\r\n\t\t\ttype: \"CHANGE_NOTIFICATION\",\r\n\t\t\tnotification: notificationMsg\r\n\t\t})\r\n\t\tsetTimeout(() => dispatch({\r\n\t\t\ttype: \"CHANGE_NOTIFICATION\",\r\n\t\t\tnotification: null\r\n\t\t}), displayTime * 1000)\r\n\t}\r\n}\r\n\r\nconst notificationReducer = (state = notificationAtStart, action) => {\r\n\tswitch (action.type) {\r\n\tcase \"CHANGE_NOTIFICATION\":\r\n\t\treturn action.notification\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default notificationReducer","//Reducer and all of the action creators involving state.blogs\r\n\r\nimport blogService from \"../services/blogs\"\r\n\r\nexport const vote = blog => {\r\n\treturn async dispatch => {\r\n\t\tconst votedBlog = await blogService.update(blog)\r\n\t\tdispatch({\r\n\t\t\ttype: \"VOTE\",\r\n\t\t\tdata: votedBlog\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const addBlog = newBlog => {\r\n\treturn async dispatch => {\r\n\t\tconst addedBlog = await blogService.create(newBlog)\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_BLOG\",\r\n\t\t\tdata: {...addedBlog,\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername: newBlog.user.username,\r\n\t\t\t\t\tuser: newBlog.user.user,\r\n\t\t\t\t\tid: newBlog.user.id\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const removeBlog = deletableBlog => {\r\n\treturn async dispatch => {\r\n\t\tawait blogService.remove(deletableBlog.id)\r\n\t\tdispatch({\r\n\t\t\ttype: \"REMOVE_BLOG\",\r\n\t\t\tdata: deletableBlog\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const updateBlog = blogToUpdate => {\r\n\treturn async dispatch => {\r\n\t\tconst updatedBlog = await blogService.update(blogToUpdate)\r\n\t\tdispatch({\r\n\t\t\ttype: \"UPDATE_BLOG\",\r\n\t\t\tdata: updatedBlog\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const initialBlogs = () => {\r\n\treturn async dispatch => {\r\n\t\tconst allBlogs = await blogService.getAll()\r\n\t\tdispatch({\r\n\t\t\ttype: \"INIT_BLOGS\",\r\n\t\t\tdata: allBlogs\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst blogReducer = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\tcase \"VOTE\":\r\n\t\tconst id = action.data.id\r\n\t\tconst blogToChange = state.find(n => n.id === id)\r\n\t\tconst changedBlog = {\r\n\t\t\t...blogToChange,\r\n\t\t\tlikes: blogToChange.likes + 1\r\n\t\t}\r\n\t\treturn state.map(blog =>\r\n\t\t\tblog.id !== id ? blog : changedBlog\r\n\t\t).sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\tcase \"ADD_BLOG\":\r\n\t\tconst blogObject = {...action.data}\r\n\t\treturn state.concat(blogObject).sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\tcase \"REMOVE_BLOG\":\r\n\t\tconst removeObject = action.data\r\n\t\treturn state.filter(blog => blog.id !== removeObject.id)\r\n\tcase \"UPDATE_BLOG\":\r\n\t\tconst updateObject = action.data\r\n\t\tconsole.log(updateObject)\r\n\t\treturn state.map(blog =>\r\n\t\t\tblog.id !== updateObject.id ? blog : updateObject\r\n\t\t).sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\tcase \"INIT_BLOGS\":\r\n\t\treturn action.data.sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default blogReducer","import React from \"react\"\r\nimport {Button, Form} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {errorChange} from \"../reducers/errorReducer\"\r\nimport {notificationChange} from \"../reducers/notificationReducer\"\r\nimport {vote, removeBlog, updateBlog} from \"../reducers/blogReducer\"\r\n\r\n//Component with which to edit some parts of existing blogs\r\nconst Editform = (props) => {\r\n\tconst blog = props.blog\r\n\r\n\tconst submitHandler = async (event) => {\r\n\t\tevent.preventDefault()\r\n\r\n\r\n\t\t//I'm too lazy to make extensive error checks for the put operation\r\n\t\t//so this will input the original values if none are given by the user on submit\r\n\t\tconst updatedAuthor = event.target.author.value.trim() === \"\" ? blog.author : event.target.author.value\r\n\t\tconst updatedUrl = event.target.url.value.trim() === \"\" ? blog.url : event.target.url.value\r\n\r\n\t\tconst blogObject = {\r\n\t\t\ttitle: blog.title,\r\n\t\t\tauthor: updatedAuthor,\r\n\t\t\turl: updatedUrl.search(\"https://\") === -1 ? \"https://\" + updatedUrl : updatedUrl,\r\n\t\t\tlikes: blog.likes,\r\n\t\t\tuser: {\r\n\t\t\t\tid: blog.user.id,\r\n\t\t\t\tname: blog.user.name,\r\n\t\t\t\tusername: blog.user.username\r\n\t\t\t},\r\n\t\t\tid: blog.id,\r\n\t\t\tcomments: blog.comments\r\n\t\t}\r\n\t\tevent.target.author.value = \"\"\r\n\t\tevent.target.url.value = \"\"\r\n\r\n\t\ttry {\r\n\t\t\tawait props.updateBlog(blogObject)\r\n\t\t\tprops.notificationChange(`${blog.title} updated succesfully!`, 5)\r\n\t\t\tprops.setShowEdit(false)\r\n\t\t}\r\n\r\n\t\tcatch (err) {\r\n\t\t\tif (updatedAuthor.length > 30 || updatedUrl.length > 100) {\r\n\t\t\t\tprops.errorChange(\"At least one field value is longer than the allowed maximum (Author = 30, Url = 100)\", 7)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<h4>Edit blog <p>{\"\\\"\"}</p>{blog.title}{\"\\\"\"}</h4>\r\n\t\t\t<Form onSubmit={submitHandler}>\r\n\t\t\t\t<Form.Group>\r\n\t\t\t\t\t<Form.Label>New Author:</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"author\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Label>New URL:</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"url\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">Save</Button> <Button type=\"reset\" >Reset</Button>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t</Form>\r\n\t\t\t<br />\r\n\t\t\t<Button onClick={() => props.setShowEdit(false)}>Cancel</Button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tvote,\r\n\terrorChange,\r\n\tremoveBlog,\r\n\tupdateBlog,\r\n\tnotificationChange\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Editform)","import React, {useState, useEffect} from \"react\"\r\nimport blogService from \"../services/blogs\"\r\nimport Editform from \"./Editform\"\r\nimport {Button, Table, Form} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {errorChange} from \"../reducers/errorReducer\"\r\nimport {notificationChange} from \"../reducers/notificationReducer\"\r\nimport {vote, removeBlog, updateBlog} from \"../reducers/blogReducer\"\r\nimport {Link, withRouter} from \"react-router-dom\"\r\n\r\n//Component which displays the page for a single blog and handles all the actions\r\n//possible in its\r\n\r\n//This component turned up way too bloated and complicated\r\n//Should slice it into smaller components, but I'm sure I will break everything if I do so\r\n\r\nconst Blog = (props) => {\r\n\tconst blog = props.blog\r\n\tconst blogStyle = {\r\n\t\tpaddingTop: 10,\r\n\t\tpaddingLeft: 2,\r\n\t\tborder: \"solid\",\r\n\t\tborderWidth: 1,\r\n\t\tmarginBottom: 5\r\n\t}\r\n\r\n\tconst likeHandler = async (blog) => {\r\n\t\tconst updateObject = {\r\n\t\t\tid: blog.id,\r\n\t\t\tuser: blog.user.id,\r\n\t\t\ttitle: blog.title,\r\n\t\t\tauthor: blog.author,\r\n\t\t\turl: blog.url,\r\n\t\t\tlikes: blog.likes + 1,\r\n\t\t\tcomments: blog.comments\r\n\t\t}\r\n\t\tprops.vote(updateObject)\r\n\t}\r\n\r\n\tconst [comments, setComments] = useState([])\r\n\tconst [commentBoxVisible, setCommentBoxVisible] = useState(false)\r\n\tconst [showEdit, setShowEdit] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst commentArray = async (blog) => {\r\n\t\t\tconst foundComments = await blogService.getComments(blog)\r\n\t\t\tif (foundComments.length !== 0) {\r\n\t\t\t\tsetComments(foundComments)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (blog) {\r\n\t\t\tcommentArray(blog)\r\n\t\t}\r\n\t}, [blog, props.notification, props.error])\r\n\t//Comments are loaded when blog is found (on first load) and when notification/error change\r\n\t//ie. when adding comments or editing the blog\r\n\r\n\tconst deleteAndEditButtons = (blog) => {\r\n\t\t//The buttons are only visible to the user that added the blog in question\r\n\t\tconst loggedUser = JSON.parse(window.localStorage.getItem(\"loggedBlogappUser\"))\r\n\t\tif (loggedUser.username === blog.user.username) {\r\n\t\t\treturn(\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<p className=\"text-center\"><Button variant=\"info\" onClick={() => setShowEdit(true)}>Edit</Button></p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<p className=\"text-center\"><Button variant=\"danger\" onClick={() => deleteHandler(blog)}>Remove</Button></p>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst deleteHandler = async (blog) => {\r\n\t\tif (window.confirm(`Do you want to remove \"${blog.title}\" by ${blog.author}? This action cannot be undone.`)) {\r\n\t\t\tawait props.removeBlog(blog)\r\n\t\t\tprops.errorChange(`\"${blog.title}\" by ${blog.author} removed`, 7)\r\n\t\t\tprops.history.push(\"/blogs\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst submitHandler = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tconst newComment = event.target.comment.value.trim()\r\n\t\tconst previousComments = comments\r\n\t\tconst blogObject = {\r\n\t\t\ttitle: blog.title,\r\n\t\t\tauthor: blog.author,\r\n\t\t\turl: blog.url,\r\n\t\t\tlikes: blog.likes,\r\n\t\t\tuser: {\r\n\t\t\t\tid: blog.user.id,\r\n\t\t\t\tname: blog.user.name,\r\n\t\t\t\tusername: blog.user.username\r\n\t\t\t},\r\n\t\t\tid: blog.id,\r\n\t\t\tcomments: previousComments.concat(newComment)\r\n\t\t}\r\n\r\n\t\tevent.target.comment.value = \"\"\r\n\t\ttry {\r\n\t\t\tawait props.updateBlog(blogObject)\r\n\t\t\tprops.notificationChange(\"Comment added!\", 5)\r\n\t\t\tsetComments(previousComments.concat(newComment)) //This hook updates the front's bloglist after a comment has been added\r\n\t\t\tsetCommentBoxVisible(false)\r\n\t\t}\r\n\t\tcatch (err) {\r\n\t\t\tif (newComment.length < 1) {\r\n\t\t\t\tprops.errorChange(\"Comment was either empty or consisted only of empty spaces\", 5)\r\n\t\t\t}\r\n\t\t\telse if (newComment.length > 250) {\r\n\t\t\t\tprops.errorChange(\"Comment is longer than the allowed maximum\", 5)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst commentBox = () => {\r\n\t\t//Comment box is not visible until a button has been pressed\r\n\t\t//Automatically hides when a comment has been submitted\r\n\t\tconst hideWhenVisible = {display: commentBoxVisible ? \"none\" : \"\"}\r\n\t\tconst showWhenVisible = {display: commentBoxVisible ? \"\" : \"none\"}\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<div style={hideWhenVisible}>\r\n\t\t\t\t\t<Button onClick={() => setCommentBoxVisible(true)}>Add a comment</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={showWhenVisible}>\r\n\t\t\t\t\t<Form onSubmit={submitHandler}>\r\n\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t<Form.Label>Write a comment (max. 250 letters)</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control type=\"text\" name=\"comment\" as=\"textarea\" rows=\"3\" />\r\n\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">Submit</Button> <Button type=\"reset\" >Reset</Button>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Button onClick={() => setCommentBoxVisible(false)}>Cancel</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tif (blog === undefined) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<br />\r\n\t\t\t<h3>Blog ID: {blog.id}</h3>\r\n\t\t\t<br />\r\n\t\t\t{showEdit ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Editform blog={blog} setShowEdit={setShowEdit}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t:\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr key={blog.id}>\r\n\t\t\t\t\t\t\t<td style={blogStyle}>\r\n\t\t\t\t\t\t\t\t<p>Title: {blog.title}</p>\r\n\t\t\t\t\t\t\t\t<p>Author: {blog.author}</p>\r\n\t\t\t\t\t\t\t\t<p>URL: <a href={blog.url}>{blog.url}</a></p>\r\n\t\t\t\t\t\t\t\t<p>Likes: {blog.likes}</p>\r\n\t\t\t\t\t\t\t\t<p>Added by: <Link to={`/users/${blog.user.id}`}>{blog.user.username}</Link></p>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td style={blogStyle}>\r\n\t\t\t\t\t\t\t\t<p className=\"text-center\"><Button variant=\"success\" size=\"lg\" onClick={() => likeHandler(blog)}>Like</Button></p>\r\n\t\t\t\t\t\t\t\t{deleteAndEditButtons(blog)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t}\r\n\t\t\t<br />\r\n\t\t\t<h4>Leave a comment</h4>\r\n\t\t\t<br />\r\n\t\t\t{commentBox()}\r\n\t\t\t<br />\r\n\t\t\t<h4>Comments:</h4>\r\n\t\t\t<br />\r\n\t\t\t{comments.length === 0 ?\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<big>No comments for this blog yet. Be the first to submit one!</big>\r\n\t\t\t\t</div>\r\n\t\t\t\t:\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{comments.map(comment => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div style={blogStyle} key={comments.indexOf(comment)}>{comment}</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<br />\r\n\t\t\t<Link to=\"/blogs\"><Button>To Blogs</Button></Link>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst blog = ownProps.blog\r\n\treturn {\r\n\t\tblog,\r\n\t\terror: state.error,\r\n\t\tnotification: state.notification\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tvote,\r\n\terrorChange,\r\n\tremoveBlog,\r\n\tupdateBlog,\r\n\tnotificationChange\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Blog))","import React from \"react\"\r\nimport {Table} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\n//This component has the table of users and also some statistics involving users\r\nconst Users = (props) => {\r\n\tconst totalUsers= props.users.length\r\n\tconst activeUsers = props.users.filter(user => user.blogs.length !== 0)\r\n\tconst commentedBlogs = props.blogs.filter(blog => blog.comments.length !== 0)\r\n\tconst totalComments = commentedBlogs.map(blog => blog.comments.length).reduce((a, b) => a + b, 0) //.reduce sums up all the comments\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<br />\r\n\t\t\t{/*User is considered active if they have submitted at least one blog*/}\r\n\t\t\t<p className=\"text-center\"><big>Currently {totalUsers} registered users, of which {activeUsers.length} are active ({(100 * parseInt(activeUsers.length) /  parseInt(totalUsers)).toFixed(2)}%).</big></p>\r\n\t\t\t<p className=\"text-center\"><big>Our users have submitted a total of {totalComments} (anonymous) comments across {commentedBlogs.length} blogs!</big></p>\r\n\t\t\t<br />\r\n\t\t\t<h2>List of registered users</h2>\r\n\t\t\t<br/>\r\n\t\t\t<h4><b>Click a username to view more details</b></h4>\r\n\t\t\t<br />\r\n\t\t\t<Table striped>\r\n\t\t\t\t<thead style={{\r\n\t\t\t\t\tpaddingTop: 10,\r\n\t\t\t\t\tpaddingLeft: 2,\r\n\t\t\t\t\tborder: \"solid\",\r\n\t\t\t\t\tborderWidth: 3,\r\n\t\t\t\t\tmarginBottom: 5\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>USERNAME</th>\r\n\t\t\t\t\t\t<th>BLOGS ADDED</th>\r\n\t\t\t\t\t\t<th>% OF ALL BLOGS</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{props.users.map(user => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<tr key={user.id}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/users/${user.id}`}>{user.username}</Link>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{user.blogs.length}</td>\r\n\t\t\t\t\t\t\t\t<td>{(100 * user.blogs.length / props.blogs.length).toFixed(2)}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</tbody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs,\r\n\t\tusers: state.users,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Users)","import React from \"react\"\r\nimport {Link} from \"react-router-dom\"\r\nimport {Button, Table} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\n\r\n\r\n//Component which displays the page of one user\r\nconst User = (props) => {\r\n\tconst user = props.user\r\n\r\n\tif (user === undefined) {\r\n\t\treturn null\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<br />\r\n\t\t\t<h3>User ID: {user.id}</h3>\r\n\t\t\t<br />\r\n\t\t\t<p><b>Username: </b>{user.username}</p>\r\n\t\t\t<p><b>Name: </b>{user.name}</p>\r\n\t\t\t<br />\r\n\t\t\t<h4>Blogs added by this user:</h4>\r\n\t\t\t<Table striped>\r\n\t\t\t\t<thead style={{\r\n\t\t\t\t\tpaddingTop: 10,\r\n\t\t\t\t\tpaddingLeft: 2,\r\n\t\t\t\t\tborder: \"solid\",\r\n\t\t\t\t\tborderWidth: 3,\r\n\t\t\t\t\tmarginBottom: 5\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>TITLE</th>\r\n\t\t\t\t\t\t<th>AUTHOR</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{user.blogs.map(blog => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={blog.id}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/blogs/${blog.id}`}>{blog.title}</Link>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{blog.author}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</tbody>\r\n\t\t\t</Table>\r\n\t\t\t<br />\r\n\t\t\t<p>Total: {user.blogs.length} blogs</p>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t<Link to=\"/users\"><Button>To Users</Button></Link>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst user = ownProps.user\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t\tuser\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(User)","import axios from \"axios\"\r\nconst baseUrl = \"/api/users/\"\r\n\r\n\r\nconst getAll = () => {\r\n\tconst request = axios.get(baseUrl)\r\n\treturn request.then(response => response.data)\r\n}\r\n\r\nconst get = user => {\r\n\tconst response = axios.get(baseUrl + user.id)\r\n\treturn response.data\r\n}\r\n\r\nconst create = async newObject => {\r\n\tconst response = await axios.post(baseUrl, newObject)\r\n\treturn response.data\r\n}\r\n\r\nconst update = async updatedObject => {\r\n\tconst response = await axios.put(baseUrl + updatedObject.id, updatedObject)\r\n\treturn response.data\r\n}\r\n\r\n\r\nexport default {getAll, get, create, update}","//Reducer and all of the action creators involving state.users\r\n\r\nimport userService from \"../services/users\"\r\n\r\nexport const addUser = newUser => {\r\n\treturn async dispatch => {\r\n\t\tconst addedUser = await userService.create(newUser)\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_USER\",\r\n\t\t\tdata: addedUser\r\n\t\t})\r\n\t}\r\n}\r\n\r\n//This action creator for deleting users is not currently in use.\r\n//I considered making it possible for the user to delete their account,\r\n//but ultimately decided against it, as the blogs are heavily entwined with the users' data\r\nexport const removeUser = deletableUser => {\r\n\treturn async dispatch => {\r\n\t\tawait userService.remove(deletableUser.id)\r\n\t\tdispatch({\r\n\t\t\ttype: \"REMOVE_USER\",\r\n\t\t\tdata: deletableUser\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const initialUsers = () => {\r\n\treturn async dispatch => {\r\n\t\tconst allUsers = await userService.getAll()\r\n\t\tdispatch({\r\n\t\t\ttype: \"INIT_USERS\",\r\n\t\t\tdata: allUsers\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst userReducer = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\tcase \"ADD_USER\":\r\n\t\tconst userObject = action.data\r\n\t\treturn state.concat(userObject).sort((a, b) => {\r\n\t\t\treturn b.likes - a.likes\r\n\t\t})\r\n\tcase \"REMOVE_USER\":\r\n\t\tconst removeObject = action.data\r\n\t\treturn state.filter(user => user.id !== removeObject.id)\r\n\tcase \"INIT_USERS\":\r\n\t\treturn action.data.sort((a, b) => {\r\n\t\t\treturn b.blogs.length - a.blogs.length\r\n\t\t})\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default userReducer","import React from \"react\"\r\nimport {Form, Button} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {withRouter} from \"react-router-dom\"\r\nimport {addUser} from \"../reducers/userReducer\"\r\nimport {notificationChange} from \"../reducers/notificationReducer\"\r\nimport {errorChange} from \"../reducers/errorReducer\"\r\n\r\nconst Createaccount = (props) => {\r\n\r\n\tconst submitHandler = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tconst username = event.target.username.value.trim()\r\n\t\t//If name is not given, a default value is submitted\r\n\t\tconst name = event.target.name.value.trim() === \"\" ? \"NoNameGiven\" : event.target.name.value\r\n\t\tconst password = event.target.password.value.trim()\r\n\t\tconst password2 = event.target.password2.value.trim()\r\n\r\n\t\tevent.target.username.value = \"\"\r\n\t\tevent.target.name.value = \"\"\r\n\t\tevent.target.password.value = \"\"\r\n\t\tevent.target.password2.value = \"\"\r\n\r\n\t\tif (password !== password2) {\r\n\t\t\tprops.errorChange(\"The passwords don't match\", 5)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst newUserObject = {\r\n\t\t\t\tusername,\r\n\t\t\t\tname,\r\n\t\t\t\tpassword\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait props.addUser(newUserObject)\r\n\t\t\t\tprops.notificationChange(`New account \"${username}\" created successfully!`, 5)\r\n\t\t\t\tprops.history.push(\"/login\")\r\n\t\t\t}\r\n\r\n\t\t\tcatch (err) {\r\n\r\n\t\t\t\tif (username === \"\" || password === \"\") {\r\n\t\t\t\t\tprops.errorChange(\"One of the required fields is missing\", 5)\r\n\t\t\t\t}\r\n\t\t\t\telse if (props.users.filter(user => user.username === username).length > 0) {\r\n\t\t\t\t\tprops.errorChange(`Username \"${username}\" is already in use`, 5)\r\n\t\t\t\t}\r\n\t\t\t\telse if (username.length > 20 || username.length < 4) {\r\n\t\t\t\t\tprops.errorChange(\"Username is either too short or too long\", 5)\r\n\t\t\t\t}\r\n\t\t\t\telse if (password.length > 25 || password.length < 6) {\r\n\t\t\t\t\tprops.errorChange(\"Password is either too short or too long\", 5)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<br />\r\n\t\t\t<h4><b>IMPORTANT: </b>User passwords are saved as encrypted, so the actual password is not visible to anyone</h4>\r\n\t\t\t<br />\r\n\t\t\t<Form onSubmit={submitHandler}>\r\n\t\t\t\t<Form.Group>\r\n\t\t\t\t\t<Form.Label>Username (4-20 symbols):</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Label>Name (optional):</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Label>Password (6-25 symbols):</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Label>Repeat password:</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">Submit</Button> <Button type=\"reset\" >Reset</Button>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs,\r\n\t\tusers: state.users,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\taddUser,\r\n\tnotificationChange,\r\n\terrorChange\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Createaccount))","import React from \"react\"\r\n\r\nconst Footer = () => (\r\n\t<div>\r\n\t\t<br />\r\n\t\t<hr />\r\n\t\t<p>Bloglist app for <a href=\"https://fullstackopen.com/\">Full Stack Open</a> course by <a href=\"https://www.helsinki.fi/en\">University of Helsinki</a></p>\r\n\t\t<br />\r\n\t\t<p>Oskari Tervo, 2019</p>\r\n\t</div>\r\n)\r\n\r\nexport default Footer","import axios from \"axios\"\r\nconst baseUrl = \"/api/login\"\r\n\r\nconst login = async (credentials) => {\r\n\tconst response = await axios.post(baseUrl, credentials)\r\n\treturn response.data\r\n}\r\n\r\nexport default {login}","//Reducer and all of the action creators involving state.login\r\n\r\nimport loginService from \"../services/login\"\r\nimport blogService from \"../services/blogs\"\r\n\r\nexport const changeLogin = (username, password) => {\r\n\treturn async dispatch => {\r\n\t\tconst loginDetails = await loginService.login({username, password})\r\n\t\twindow.localStorage.setItem(\r\n\t\t\t\"loggedBlogappUser\", JSON.stringify(loginDetails)\r\n\t\t)\r\n\t\tblogService.setToken(loginDetails.token)\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_LOGIN\",\r\n\t\t\tdata: loginDetails\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport const resetLogin = () => {\r\n\treturn async dispatch => {\r\n\t\twindow.localStorage.removeItem(\"loggedBlogappUser\")\r\n\t\tdispatch({\r\n\t\t\ttype: \"RESET_LOGIN\"\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst loginReducer = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\tcase \"CHANGE_LOGIN\":\r\n\t\treturn state.concat(action.data)\r\n\tcase \"RESET_LOGIN\":\r\n\t\treturn state = []\r\n\tdefault:\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nexport default loginReducer","import React from \"react\"\r\nimport {connect} from \"react-redux\"\r\nimport {Form, Button} from \"react-bootstrap\"\r\nimport {changeLogin} from \"../reducers/loginReducer\"\r\nimport {errorChange} from \"../reducers/errorReducer\"\r\nimport {notificationChange} from \"../reducers/notificationReducer\"\r\nimport {withRouter} from \"react-router-dom\"\r\n\r\n//Component which displays the login form and handles its submissions\r\nconst LoginForm = (props) => {\r\n\r\n\tconst submitHandler = async (event) => {\r\n\t\tevent.preventDefault()\r\n\t\tconst username = event.target[0].value\r\n\t\tconst password = event.target[1].value\r\n\t\tevent.target[1].value = \"\"\r\n\t\ttry {\r\n\t\t\tawait props.changeLogin(username, password)\r\n\t\t\tprops.notificationChange(`Successfully logged in. Welcome back, ${username}!`, 5)\r\n\t\t\tprops.history.push(\"/\")\r\n\t\t}\r\n\t\tcatch (err) {\r\n\t\t\tprops.errorChange(\"Invalid username or password\", 5)\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t<br />\r\n\t\t<h2>Login to the application</h2>\r\n\t\t<br />\r\n\t\t<br />\r\n\t\t<Form onSubmit={submitHandler}>\r\n\t\t\t<Form.Group>\r\n\t\t\t\t<Form.Label>Username:</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Label>Password:</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t/>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Button id=\"loginbutton\" variant=\"primary\" type=\"submit\">Login</Button> <Button type=\"reset\" >Reset</Button>\r\n\t\t\t</Form.Group>\r\n\t\t</Form>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tchangeLogin,\r\n\terrorChange,\r\n\tnotificationChange\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(LoginForm))","import React from \"react\"\r\nimport {Form, Button} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {addBlog} from \"../reducers/blogReducer\"\r\nimport {notificationChange} from \"../reducers/notificationReducer\"\r\nimport {errorChange} from \"../reducers/errorReducer\"\r\n\r\n//Component which adds new blogs to the collection\r\nconst BlogForm = (props) => {\r\n\r\n\tconst submitHandler = async (event) => {\r\n\t\tevent.preventDefault()\r\n\r\n\t\tconst loggedUser = JSON.parse(window.localStorage.getItem(\"loggedBlogappUser\"))\r\n\t\tconst urlValue = event.target[2].value\r\n\t\tconst blogObject = {\r\n\t\t\ttitle: event.target[0].value,\r\n\t\t\tauthor: event.target[1].value,\r\n\t\t\turl: urlValue.search(\"https://\") === -1 ? \"https://\" + urlValue : urlValue, //https is added when it's missing\r\n\t\t\t//The problem comes when the added link is http instead...\r\n\t\t\tlikes: event.target[3].value === \"\" ? 0 : parseInt(event.target[3].value),\r\n\t\t\tuser: {\r\n\t\t\t\tid: loggedUser.id,\r\n\t\t\t\tname: loggedUser.name,\r\n\t\t\t\tusername: loggedUser.username\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.target.title.value = \"\"\r\n\t\tevent.target.author.value = \"\"\r\n\t\tevent.target.url.value = \"\"\r\n\t\tevent.target.likes.value = \"\"\r\n\r\n\t\ttry {\r\n\t\t\tawait props.addBlog(blogObject)\r\n\t\t\tprops.notificationChange(`A new blog \"${blogObject.title}\" by ${blogObject.author} has been added to the collection`, 5)\r\n\t\t\tprops.setNewBlogVisible(false) //Hides the blogform after a successful submission\r\n\t\t}\r\n\r\n\t\tcatch (err) {\r\n\t\t\tif (blogObject.title === \"\" || blogObject.author === \"\" || blogObject.url === \"\")\r\n\t\t\t\tprops.errorChange(\"One of the required fields is missing\", 7)\r\n\t\t\telse if (props.blogs.find(blog => blogObject.title === blog.title))\r\n\t\t\t\tprops.errorChange(`A blog titled \"${blogObject.title}\" is already in the collection`, 7)\r\n\t\t\t//Check if likes is a positive integer\r\n\t\t\telse if (typeof blogObject.likes !== \"number\" || blogObject.likes < 0 || !Number.isInteger(blogObject.likes))\r\n\t\t\t\tprops.errorChange(\"Likes has to be an integer valued 0 or greater\", 7)\r\n\t\t\telse if (blogObject.title.length > 100 || blogObject.author.length > 30 || blogObject.url.length > 100)\r\n\t\t\t\tprops.errorChange(\"At least one field value is longer than the allowed maximum (Title = 100, Author = 30, Url = 100)\", 7)\r\n\t\t\telse if (blogObject.likes > 1e+10)\r\n\t\t\t\tprops.errorChange(\"Maximum allowed likes is 10 000 000 000 (ten billion)\", 7)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<h2>Add a new blog</h2>\r\n\t\t<br />\r\n\t\t<Form onSubmit={submitHandler}>\r\n\t\t\t<Form.Group>\r\n\t\t\t\t<Form.Label>Title:</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\tid=\"title\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Label>Author:</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"author\"\r\n\t\t\t\t\tid=\"author\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Label>URL:</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"url\"\r\n\t\t\t\t\tid=\"url\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Label>Likes (optional):</Form.Label>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"likes\"\r\n\t\t\t\t\tid=\"likes\"\r\n\t\t\t\t/>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Button id=\"save\" variant=\"primary\" type=\"submit\">Save</Button> <Button type=\"reset\" >Reset</Button>\r\n\t\t\t</Form.Group>\r\n\t\t</Form>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\taddBlog,\r\n\tnotificationChange,\r\n\terrorChange\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BlogForm)","import React, {useState} from \"react\"\r\nimport {Table, Button} from \"react-bootstrap\"\r\nimport {connect} from \"react-redux\"\r\nimport {Link} from \"react-router-dom\"\r\n\r\n//Component which displays the list of all blogs in a table\r\nconst Blogtable = (props) => {\r\n\r\n\tconst [titleFilter, setTitleFilter] = useState(\"\")\r\n\tconst [authorFilter, setAuthorFilter] = useState(\"\")\r\n\r\n\tconst blogFilter = () => {\r\n\r\n\t\tconst resetHandler = () => {\r\n\t\t\tsetTitleFilter(\"\")\r\n\t\t\tsetAuthorFilter(\"\")\r\n\t\t}\r\n\r\n\t\tconst titleFilterHandler = (event) => {\r\n\t\t\tevent.preventDefault()\r\n\t\t\tsetTitleFilter(event.target.value)\r\n\t\t}\r\n\r\n\t\tconst authorFilterHandler = (event) => {\r\n\t\t\tevent.preventDefault()\r\n\t\t\tsetAuthorFilter(event.target.value)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t//Would very much like to use Bootstrap here, but I cannot figure how to\r\n\t\t\t//access the event values in InputGroup...\r\n\t\t\t<div>\r\n\t\t\t\t<h4>Filter blogs by</h4>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<p><input name=\"title\" onChange={titleFilterHandler} placeholder=\"Title\" size=\"50\"/></p>\r\n\t\t\t\t\t<p><input name=\"author\" onChange={authorFilterHandler} placeholder=\"Author\" size=\"50\"/></p>\r\n\t\t\t\t\t<Button variant=\"primary\" type=\"reset\" onClick={resetHandler}>Reset</Button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst blogsToShow = (blogs) => {\r\n\t\t//The structure of this component is absolute shit, but I'm too tired to think of anything cleaner\r\n\r\n\t\t//If no filters, render every blog from store\r\n\t\tif (titleFilter === \"\" && authorFilter === \"\") {\r\n\t\t\treturn (\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{blogs.map(blog => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={blog.id}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/blogs/${blog.id}`}>{blog.title}</Link>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{blog.author}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t)}\r\n\t\t\t\t</tbody>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\t//First, the title filter is applied\r\n\t\t\tconst titleFiltered = blogs.map(blog => {\r\n\t\t\t\tconst titleLower = blog.title.toLowerCase()\r\n\t\t\t\tconst titleSearch = titleLower.search(titleFilter.toLowerCase())\r\n\t\t\t\tif (titleSearch !== -1)\r\n\t\t\t\t\treturn blog\r\n\t\t\t}).filter(blog => blog !== undefined)\r\n\r\n\t\t\t//Then the author filter after\r\n\t\t\tconst authorFiltered = titleFiltered.map(blog => {\r\n\t\t\t\tconst authorLower = blog.author.toLowerCase()\r\n\t\t\t\tconst titleSearch = authorLower.search(authorFilter.toLowerCase())\r\n\t\t\t\tif (titleSearch !== -1)\r\n\t\t\t\t\treturn blog\r\n\t\t\t}).filter(blog => blog !== undefined)\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{/*Rendering of each blog that got past the filters*/}\r\n\t\t\t\t\t{authorFiltered.map(blog => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={blog.id}>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<Link to={`/blogs/${blog.id}`}>{blog.title}</Link>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{blog.author}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t)}\r\n\t\t\t\t</tbody>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{blogFilter()}\r\n\t\t\t<br />\r\n\t\t\t<Table striped>\r\n\t\t\t\t<thead style={{\r\n\t\t\t\t\tpaddingTop: 10,\r\n\t\t\t\t\tpaddingLeft: 2,\r\n\t\t\t\t\tborder: \"solid\",\r\n\t\t\t\t\tborderWidth: 3,\r\n\t\t\t\t\tmarginBottom: 5\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>NAME OF THE BLOG</th>\r\n\t\t\t\t\t\t<th>AUTHOR</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t{blogsToShow(props.blogs)}\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Blogtable)","import React from \"react\"\r\nimport {connect} from \"react-redux\"\r\nimport {resetLogin} from \"../reducers/loginReducer\"\r\nimport {Button} from \"react-bootstrap\"\r\nimport {withRouter} from \"react-router-dom\"\r\n\r\n//This component renders the logged user's information and the logout button on top of every page\r\nconst Logout = (props) => {\r\n\tconst handleLogout = (event) => {\r\n\t\t//Removal of login store, localStorage and user status hook when logging out\r\n\t\tevent.preventDefault()\r\n\t\twindow.localStorage.removeItem(\"loggedBlogappUser\")\r\n\t\tprops.resetLogin()\r\n\t\tprops.setUser(null)\r\n\t\tprops.history.push(\"/login\")\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t<p className=\"text-right\">Logged in as {props.user.username} ({props.user.name}) <Button size=\"sm\" onClick={handleLogout}>Logout</Button></p>\r\n\t\t\t<br />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tresetLogin\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(Logout))","import React, {useState, useEffect} from \"react\"\r\nimport \"./index.css\"\r\nimport {Button, Navbar, Nav} from \"react-bootstrap\"\r\nimport Notification from \"./components/Notification\"\r\nimport Errormessage from \"./components/Errormessage\"\r\nimport Home from \"./components/Home\"\r\nimport Blog from \"./components/Blog\"\r\nimport Users from \"./components/Users\"\r\nimport User from \"./components/User\"\r\nimport Createaccount from \"./components/Createaccount\"\r\nimport Footer from \"./components/Footer\"\r\nimport LoginForm from \"./components/LoginForm\"\r\nimport BlogForm from \"./components/BlogForm\"\r\nimport Blogtable from \"./components/Blogtable\"\r\nimport Logout from \"./components/Logout\"\r\nimport blogService from \"./services/blogs\"\r\nimport {connect} from \"react-redux\"\r\nimport {initialBlogs} from \"./reducers/blogReducer\"\r\nimport {initialUsers} from \"./reducers/userReducer\"\r\nimport {\r\n\tBrowserRouter as Router, Route, Link, Switch\r\n} from \"react-router-dom\"\r\n\r\n//This component ended up quite bloated, despite my best attempts of avoiding it from happening\r\n//I suppose the routes should have been included in their own subcomponent in a separate file\r\nconst App = (props) => {\r\n\tconst [user, setUser] = useState(null)\r\n\tconst [newBlogVisible, setNewBlogVisible] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\t//This effect hook is called whenever the props change, ie. every time the store is altered in any way.\r\n\t\t//This is nice as the list of blogs is automatically refreshed when adding/deleting stuff\r\n\t\tprops.initialBlogs()\r\n\t\tprops.initialUsers()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loggedUserJSON = window.localStorage.getItem(\"loggedBlogappUser\")\r\n\t\tif (loggedUserJSON) {\r\n\t\t\tconst user = JSON.parse(loggedUserJSON)\r\n\t\t\tsetUser(user)\r\n\t\t\tblogService.setToken(user.token)\r\n\t\t}\r\n\t}, [props.login]) //This effect hook is called every time the login info in the store changes\r\n\r\n\tconst blogForm = () => {\r\n\t\t//Some shenanigans which toggle the visibility of the blog adding form\r\n\t\tconst hideWhenVisible = {display: newBlogVisible ? \"none\" : \"\"}\r\n\t\tconst showWhenVisible = {display: newBlogVisible ? \"\" : \"none\"}\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<div style={hideWhenVisible}>\r\n\t\t\t\t\t<Button onClick={() => setNewBlogVisible(true)}>Add a new blog</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={showWhenVisible}>\r\n\t\t\t\t\t<BlogForm setNewBlogVisible={setNewBlogVisible}/>\r\n\t\t\t\t\t<Button onClick={() => setNewBlogVisible(false)}>Cancel</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst NoMatch = () => (\r\n\t\t//Component to render when 404\r\n\t\t<div>\r\n\t\t\t<h1 className=\"text-center\">404</h1>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t<h3 className=\"text-center\">There does not seem to be anything here...</h3>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst userById = (id) =>\r\n\t\tprops.users.find(user => user.id === id)\r\n\tconst blogById = (id) =>\r\n\t\tprops.blogs.find(blog => blog.id === id)\r\n\r\n\tconst totalBlogs = props.blogs.length\r\n\tconst activeUsers = props.users.filter(user => user.blogs.length !== 0)\r\n\tconst padding = {padding: 20}\r\n\r\n\treturn (\r\n\t\t<div className=\"container\">\r\n\t\t\t<Router>\r\n\t\t\t\t{user === null ?\r\n\t\t\t\t\t//TODO: If a user is logged in and refreshes the page, LoginForm is rendered unnecessarily very briefly\r\n\t\t\t\t\t//because the app takes time to update the user variable with the localStorage information.\r\n\t\t\t\t\t//Would very much like to stop this from happening, but currently out of ideas.\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h1 className=\"text-center\">Welcome to my React bloglist app!</h1>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<h4 className=\"text-center\"><big><Link to=\"/login\"><u>Login</u></Link> to the app or <Link to=\"/createaccount\"><u>create</u></Link> an account.</big></h4>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<p className=\"text-center\"><big><b>The database currently has {totalBlogs} blogs by {activeUsers.length} users!</b></big></p>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<p className=\"text-center\"><big><b>A total of {props.users.length} users have registered for the app!</b></big></p>\r\n\t\t\t\t\t\t{/*The /login path is redundant, because unlogged user sees a shitty page and has to manually move to the login page\r\n\t\t\t\t\t\tand after the login, is redirected back to the home page. Would be better if the login was rendered on the homepage\r\n\t\t\t\t\t\twhen the visitor is not logged in, but since this system is already in place and served as a nice practice to implement,\r\n\t\t\t\t\t\tI'm going to let this pass.*/}\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/login\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<LoginForm />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/createaccount\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"text-center\">Create a new account</h1>\r\n\t\t\t\t\t\t\t\t\t<Createaccount />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/*Navbar collapses when on a small screen, like phone*/}\r\n\t\t\t\t\t\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n\t\t\t\t\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n\t\t\t\t\t\t\t\t<Navbar.Brand href=\"/\">Bloglist App</Navbar.Brand>\r\n\t\t\t\t\t\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\r\n\t\t\t\t\t\t\t\t\t<Nav className=\"mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"#home\" as=\"span\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link style={padding} to=\"/\">Home</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"#blogs\" as=\"span\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link style={padding} to=\"/blogs\">Blogs</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"#users\" as=\"span\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link style={padding} to=\"/users\">Users</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"#about\" as=\"span\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link style={padding} to=\"/about\">About</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t\t\t</Navbar.Collapse>\r\n\t\t\t\t\t\t\t</Navbar>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Logout user={user} setUser={setUser}/>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path=\"/\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"text-center\">Bloglist React App</h1>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\"><big>Welcome to my React bloglist app!</big></p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\"><big>Feel free to add blogs and comments as you please</big></p>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\"><big>All of the added stuff is pretty much unmoderated, so <b>do not take things too seriously</b>, as almost everything is nothing more than a stupid joke.</big></p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\"><big>Use the navigation bar on top to find more!</big></p>\r\n\t\t\t\t\t\t\t\t\t<Home user={user} setUser={setUser}/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/blogs\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"text-center\">Bloglist</h1>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\"><big>The database currently has {totalBlogs} blogs by {activeUsers.length} users!</big></p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t{blogForm()}\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<Blogtable/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/blogs/:id\" render={({match}) =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<Blog blog={blogById(match.params.id)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/users\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Errormessage />\r\n\t\t\t\t\t\t\t\t\t<Notification />\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"text-center\">Users</h1>\r\n\t\t\t\t\t\t\t\t\t<Users />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/users/:id\" render={({match}) =>\r\n\t\t\t\t\t\t\t\t<User user={userById(match.params.id)} />\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route exact path=\"/about\" render={() =>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<h1 className=\"text-center\">About the App</h1>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tThis app is a continuation of the work done for the Full Stack Open course by University of Helsinki.\r\n\t\t\t\t\t\t\t\t\tDuring the course, we were tasked to build an app for listing of blogs by different users piece by piece.\r\n\t\t\t\t\t\t\t\t\tThe last task for the course was to pretty much improve the Bloglist App as much as possible with everything\r\n\t\t\t\t\t\t\t\t\tlearned during the course and here is my best effort at doing so.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tAlthough this app is heavily based on the tasks and material of the course, the vast majority of the code is\r\n\t\t\t\t\t\t\t\t\toriginal and done by me. Backend is done using Node.js and all of the data is stored on MongoDB. Frontend\r\n\t\t\t\t\t\t\t\t\tis built with React and Redux. Some relevant libraries for this project: Mongoose, Express, bcrypt,\r\n\t\t\t\t\t\t\t\t\tcors for backend and Axios, Redux, React-Router-DOM, React-Bootstrap for frontend.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tIf you wish to give feedback about the app, feel free to do so by sending me an email\r\n\t\t\t\t\t\t\t\t\tat <a href= \"mailto: tervo.oskari@gmail.com\">tervo.oskari@gmail.com</a>.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tPS. I know very well how bad and bland the site looks, but unfortunately I lack the artistic vision and patience\r\n\t\t\t\t\t\t\t\t\tto improve it to a pleasing degree :|\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t} />\r\n\t\t\t\t\t\t\t<Route component={NoMatch} />\r\n\t\t\t\t\t\t</Switch >\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</Router>\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tblogs: state.blogs,\r\n\t\tusers: state.users,\r\n\t\tlogin: state.login,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tinitialBlogs,\r\n\tinitialUsers\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)","//index file for the bloglist app's frontend\r\n\r\nimport React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./App\"\r\nimport {Provider} from \"react-redux\"\r\nimport thunk from \"redux-thunk\"\r\nimport {createStore, combineReducers, applyMiddleware} from \"redux\"\r\nimport blogReducer from \"./reducers/blogReducer\"\r\nimport loginReducer from \"./reducers/loginReducer\"\r\nimport notificationReducer from \"./reducers/notificationReducer\"\r\nimport errorReducer from \"./reducers/errorReducer\"\r\nimport userReducer from \"./reducers/userReducer\"\r\n\r\nconst reducer = combineReducers({\r\n\tblogs: blogReducer,\r\n\tusers: userReducer,\r\n\tlogin: loginReducer,\r\n\tnotification: notificationReducer,\r\n\terror: errorReducer\r\n})\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk))\r\n\r\nconst render = () => {\r\n\tReactDOM.render(\r\n\t\t<Provider store={store}>\r\n\t\t\t<App />\r\n\t\t</Provider>,\r\n\t\tdocument.getElementById(\"root\")\r\n\t)\r\n}\r\n\r\nrender()\r\nstore.subscribe(render)"],"sourceRoot":""}