(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(25),c=n.n(l),u=n(17),o=(n(67),n(106)),s=n(109),i=n(108),m=n(110),d=n(7),p=Object(d.b)(function(e){return{notification:e.notification}})(function(e){var t=e.notification;return null===t?null:r.a.createElement("div",null,t&&r.a.createElement(m.a,{variant:"success"},t))}),E=Object(d.b)(function(e){return{error:e.error}})(function(e){var t=e.error;return null===t?null:r.a.createElement("div",null,t&&r.a.createElement(m.a,{variant:"danger"},t))}),f=n(8),b=n(105),h=Object(d.b)(function(e){return{blogs:e.blogs,users:e.users}})(function(e){var t=function(e){var t=e.filter(function(e){return 0!==e.comments.length}),n=t.length,a=Math.floor(Math.random()*n);if(void 0===t[a])return null;var l=t[a].comments.length,c=Math.floor(Math.random()*l),u=t[a].comments[c];return void 0===u?null:r.a.createElement("tr",null,r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("p",null,"From ",r.a.createElement(f.b,{to:"/blogs/".concat(t[a].id)},t[a].title))))};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("h2",null,"5 most popular blogs"),r.a.createElement("br",null),function(e){var t=e.sort(function(e,t){return t.likes-e.likes}).slice(0,5);return void 0===t?null:r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{key:e.id},r.a.createElement(f.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement("td",{className:"text-right"},e.likes," likes"))}))))}(e.blogs),r.a.createElement("br",null),r.a.createElement("h2",null,"Most active user"),r.a.createElement("br",null),function(e){var t=e.sort(function(e,t){return t.blogs.length-e.blogs.length})[0];return void 0===t?null:r.a.createElement("p",null,r.a.createElement("big",null,r.a.createElement("u",null,r.a.createElement(f.b,{to:"/users/".concat(t.id)},t.username))," with ",t.blogs.length," added blogs!"))}(e.users),r.a.createElement("br",null),r.a.createElement("h4",null,"To get you in the mood for some uncivilized discussion, here are some randomly picked comments across all blogs"),r.a.createElement("br",null),r.a.createElement(b.a,null,r.a.createElement("tbody",null,t(e.blogs),t(e.blogs),t(e.blogs),t(e.blogs),t(e.blogs)))))}),g=n(2),v=n.n(g),y=n(5),w=n(11),k=n.n(w),x="/api/blogs/",O=null,C={getAll:function(){var e=Object(y.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),get:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(x+t.id);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getComments:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(x+t.id+"/comments");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){O="bearer ".concat(e)},create:function(){var e=Object(y.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,k.a.post(x,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put(x+t.id,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(y.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,k.a.delete(x+t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=n(107),N=function(e,t){return function(){var n=Object(y.a)(v.a.mark(function n(a){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({type:"CHANGE_ERROR",error:e});case 2:setTimeout(function(){return a({type:"CHANGE_ERROR",error:null})},1e3*t);case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ERROR":return t.error;default:return e}},A=function(e,t){return function(){var n=Object(y.a)(v.a.mark(function n(a){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({type:"CHANGE_NOTIFICATION",notification:e});case 2:setTimeout(function(){return a({type:"CHANGE_NOTIFICATION",notification:null})},1e3*t);case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NOTIFICATION":return t.notification;default:return e}},S=n(35),T=function(e){return function(){var t=Object(y.a)(v.a.mark(function t(n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.update(e);case 2:a=t.sent,n({type:"VOTE",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(y.a)(v.a.mark(function t(n){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.remove(e.id);case 2:n({type:"REMOVE_BLOG",data:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(y.a)(v.a.mark(function t(n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.update(e);case 2:a=t.sent,n({type:"UPDATE_BLOG",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VOTE":var n=t.data.id,a=e.find(function(e){return e.id===n}),r=Object(S.a)({},a,{likes:a.likes+1});return e.map(function(e){return e.id!==n?e:r}).sort(function(e,t){return t.likes-e.likes});case"ADD_BLOG":var l=Object(S.a)({},t.data);return e.concat(l).sort(function(e,t){return t.likes-e.likes});case"REMOVE_BLOG":var c=t.data;return e.filter(function(e){return e.id!==c.id});case"UPDATE_BLOG":var u=t.data;return console.log(u),e.map(function(e){return e.id!==u.id?e:u}).sort(function(e,t){return t.likes-e.likes});case"INIT_BLOGS":return t.data.sort(function(e,t){return t.likes-e.likes});default:return e}},G={vote:T,errorChange:N,removeBlog:R,updateBlog:U,notificationChange:A},D=Object(d.b)(null,G)(function(e){var t=e.blog,n=function(){var n=Object(y.a)(v.a.mark(function n(a){var r,l,c;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=""===a.target.author.value.trim()?t.author:a.target.author.value,l=""===a.target.url.value.trim()?t.url:a.target.url.value,c={title:t.title,author:r,url:-1===l.search("https://")?"https://"+l:l,likes:t.likes,user:{id:t.user.id,name:t.user.name,username:t.user.username},id:t.id,comments:t.comments},a.target.author.value="",a.target.url.value="",n.prev=6,n.next=9,e.updateBlog(c);case 9:e.notificationChange("".concat(t.title," updated succesfully!"),5),e.setShowEdit(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(6),(r.length>30||l.length>100)&&e.errorChange("At least one field value is longer than the allowed maximum (Author = 30, Url = 100)",7);case 16:case"end":return n.stop()}},n,null,[[6,13]])}));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h4",null,"Edit blog ",r.a.createElement("p",null,'"'),t.title,'"'),r.a.createElement(j.a,{onSubmit:n},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"New Author:"),r.a.createElement(j.a.Control,{type:"text",name:"author"}),r.a.createElement(j.a.Label,null,"New URL:"),r.a.createElement(j.a.Control,{type:"text",name:"url"}),r.a.createElement("hr",null),r.a.createElement(o.a,{variant:"primary",type:"submit"},"Save")," ",r.a.createElement(o.a,{type:"reset"},"Reset"))),r.a.createElement("br",null),r.a.createElement(o.a,{onClick:function(){return e.setShowEdit(!1)}},"Cancel"))}),_=n(21),F={vote:T,errorChange:N,removeBlog:R,updateBlog:U,notificationChange:A},M=Object(_.e)(Object(d.b)(function(e,t){return{blog:t.blog,error:e.error,notification:e.notification}},F)(function(e){var t=e.blog,n={paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},l=function(){var t=Object(y.a)(v.a.mark(function t(n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={id:n.id,user:n.user.id,title:n.title,author:n.author,url:n.url,likes:n.likes+1,comments:n.comments},e.vote(a);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),c=Object(a.useState)([]),s=Object(u.a)(c,2),i=s[0],m=s[1],d=Object(a.useState)(!1),p=Object(u.a)(d,2),E=p[0],h=p[1],g=Object(a.useState)(!1),w=Object(u.a)(g,2),k=w[0],x=w[1];Object(a.useEffect)(function(){t&&function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getComments(t);case 2:0!==(n=e.sent).length&&m(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(t)},[t,e.notification,e.error]);var O=function(){var t=Object(y.a)(v.a.mark(function t(n){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm('Do you want to remove "'.concat(n.title,'" by ').concat(n.author,"? This action cannot be undone."))){t.next=5;break}return t.next=3,e.removeBlog(n);case 3:e.errorChange('"'.concat(n.title,'" by ').concat(n.author," removed"),7),e.history.push("/blogs");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),N=function(){var n=Object(y.a)(v.a.mark(function n(a){var r,l,c;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=a.target.comment.value.trim(),l=i,c={title:t.title,author:t.author,url:t.url,likes:t.likes,user:{id:t.user.id,name:t.user.name,username:t.user.username},id:t.id,comments:l.concat(r)},a.target.comment.value="",n.prev=5,n.next=8,e.updateBlog(c);case 8:e.notificationChange("Comment added!",5),m(l.concat(r)),h(!1),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),r.length<1?e.errorChange("Comment was either empty or consisted only of empty spaces",5):r.length>250&&e.errorChange("Comment is longer than the allowed maximum",5);case 16:case"end":return n.stop()}},n,null,[[5,13]])}));return function(e){return n.apply(this,arguments)}}();return void 0===t?null:r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h3",null,"Blog ID: ",t.id),r.a.createElement("br",null),k?r.a.createElement("div",null,r.a.createElement(D,{blog:t,setShowEdit:x})):r.a.createElement(b.a,null,r.a.createElement("tbody",null,r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:n},r.a.createElement("p",null,"Title: ",t.title),r.a.createElement("p",null,"Author: ",t.author),r.a.createElement("p",null,"URL: ",r.a.createElement("a",{href:t.url},t.url)),r.a.createElement("p",null,"Likes: ",t.likes),r.a.createElement("p",null,"Added by: ",r.a.createElement(f.b,{to:"/users/".concat(t.user.id)},t.user.username))),r.a.createElement("td",{style:n},r.a.createElement("p",{className:"text-center"},r.a.createElement(o.a,{variant:"success",size:"lg",onClick:function(){return l(t)}},"Like")),function(e){if(JSON.parse(window.localStorage.getItem("loggedBlogappUser")).username===e.user.username)return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",{className:"text-center"},r.a.createElement(o.a,{variant:"info",onClick:function(){return x(!0)}},"Edit")),r.a.createElement("hr",null),r.a.createElement("p",{className:"text-center"},r.a.createElement(o.a,{variant:"danger",onClick:function(){return O(e)}},"Remove")))}(t))))),r.a.createElement("br",null),r.a.createElement("h4",null,"Leave a comment"),r.a.createElement("br",null),function(){var e={display:E?"none":""},t={display:E?"":"none"};return r.a.createElement("div",null,r.a.createElement("div",{style:e},r.a.createElement(o.a,{onClick:function(){return h(!0)}},"Add a comment")),r.a.createElement("div",{style:t},r.a.createElement(j.a,{onSubmit:N},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Write a comment (max. 250 letters)"),r.a.createElement(j.a.Control,{type:"text",name:"comment",as:"textarea",rows:"3"}),r.a.createElement("hr",null),r.a.createElement(o.a,{variant:"primary",type:"submit"},"Submit")," ",r.a.createElement(o.a,{type:"reset"},"Reset"))),r.a.createElement("br",null),r.a.createElement(o.a,{onClick:function(){return h(!1)}},"Cancel")))}(),r.a.createElement("br",null),r.a.createElement("h4",null,"Comments:"),r.a.createElement("br",null),0===i.length?r.a.createElement("div",null,r.a.createElement("big",null,"No comments for this blog yet. Be the first to submit one!")):r.a.createElement("div",null,i.map(function(e){return r.a.createElement("div",{style:n,key:i.indexOf(e)},e)})),r.a.createElement("br",null),r.a.createElement(f.b,{to:"/blogs"},r.a.createElement(o.a,null,"To Blogs")))})),H=Object(d.b)(function(e){return{blogs:e.blogs,users:e.users}})(function(e){var t=e.users.length,n=e.users.filter(function(e){return 0!==e.blogs.length}),a=e.blogs.filter(function(e){return 0!==e.comments.length}),l=a.map(function(e){return e.comments.length}).reduce(function(e,t){return e+t},0);return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"Currently ",t," registered users, of which ",n.length," are active (",(100*parseInt(n.length)/parseInt(t)).toFixed(2),"%).")),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"Our users have submitted a total of ",l," (anonymous) comments across ",a.length," blogs!")),r.a.createElement("br",null),r.a.createElement("h2",null,"List of registered users"),r.a.createElement("br",null),r.a.createElement("h4",null,r.a.createElement("b",null,"Click a username to view more details")),r.a.createElement("br",null),r.a.createElement(b.a,{striped:!0},r.a.createElement("thead",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:3,marginBottom:5}},r.a.createElement("tr",null,r.a.createElement("th",null,"USERNAME"),r.a.createElement("th",null,"BLOGS ADDED"),r.a.createElement("th",null,"% OF ALL BLOGS"))),r.a.createElement("tbody",null,e.users.map(function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement(f.b,{to:"/users/".concat(t.id)},t.username)),r.a.createElement("td",null,t.blogs.length),r.a.createElement("td",null,(100*t.blogs.length/e.blogs.length).toFixed(2)))}))))}),W=Object(d.b)(function(e,t){var n=t.user;return{users:e.users,user:n}})(function(e){var t=e.user;return void 0===t?null:r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h3",null,"User ID: ",t.id),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("b",null,"Username: "),t.username),r.a.createElement("p",null,r.a.createElement("b",null,"Name: "),t.name),r.a.createElement("br",null),r.a.createElement("h4",null,"Blogs added by this user:"),r.a.createElement(b.a,{striped:!0},r.a.createElement("thead",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:3,marginBottom:5}},r.a.createElement("tr",null,r.a.createElement("th",null,"TITLE"),r.a.createElement("th",null,"AUTHOR"))),r.a.createElement("tbody",null,t.blogs.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(f.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement("td",null,e.author))}))),r.a.createElement("br",null),r.a.createElement("p",null,"Total: ",t.blogs.length," blogs"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.b,{to:"/users"},r.a.createElement(o.a,null,"To Users")))}),z={getAll:function(){return k.a.get("/api/users/").then(function(e){return e.data})},get:function(e){return k.a.get("/api/users/"+e.id).data},create:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/users/",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("/api/users/"+t.id,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":var n=t.data;return e.concat(n).sort(function(e,t){return t.likes-e.likes});case"REMOVE_USER":var a=t.data;return e.filter(function(e){return e.id!==a.id});case"INIT_USERS":return t.data.sort(function(e,t){return t.blogs.length-e.blogs.length});default:return e}},V={addUser:function(e){return function(){var t=Object(y.a)(v.a.mark(function t(n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.create(e);case 2:a=t.sent,n({type:"ADD_USER",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},notificationChange:A,errorChange:N},J=Object(_.e)(Object(d.b)(function(e){return{blogs:e.blogs,users:e.users}},V)(function(e){var t=function(){var t=Object(y.a)(v.a.mark(function t(n){var a,r,l,c,u;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=n.target.username.value.trim(),r=""===n.target.name.value.trim()?"NoNameGiven":n.target.name.value,l=n.target.password.value.trim(),c=n.target.password2.value.trim(),n.target.username.value="",n.target.name.value="",n.target.password.value="",n.target.password2.value="",l===c){t.next=13;break}e.errorChange("The passwords don't match",5),t.next=24;break;case 13:return u={username:a,name:r,password:l},t.prev=14,t.next=17,e.addUser(u);case 17:e.notificationChange('New account "'.concat(a,'" created successfully!'),5),e.history.push("/login"),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(14),""===a||""===l?e.errorChange("One of the required fields is missing",5):e.users.filter(function(e){return e.username===a}).length>0?e.errorChange('Username "'.concat(a,'" is already in use'),5):a.length>20||a.length<4?e.errorChange("Username is either too short or too long",5):(l.length>25||l.length<6)&&e.errorChange("Password is either too short or too long",5);case 24:case"end":return t.stop()}},t,null,[[14,21]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h4",null,r.a.createElement("b",null,"IMPORTANT: "),"User passwords are saved as encrypted, so the actual password is not visible to anyone"),r.a.createElement("br",null),r.a.createElement(j.a,{onSubmit:t},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Username (4-20 symbols):"),r.a.createElement(j.a.Control,{type:"text",name:"username"}),r.a.createElement(j.a.Label,null,"Name (optional):"),r.a.createElement(j.a.Control,{type:"text",name:"name"}),r.a.createElement(j.a.Label,null,"Password (6-25 symbols):"),r.a.createElement(j.a.Control,{type:"password",name:"password"}),r.a.createElement(j.a.Label,null,"Repeat password:"),r.a.createElement(j.a.Control,{type:"password",name:"password2"}),r.a.createElement("hr",null),r.a.createElement(o.a,{variant:"primary",type:"submit"},"Submit")," ",r.a.createElement(o.a,{type:"reset"},"Reset"))))})),q=function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("p",null,"Bloglist app for ",r.a.createElement("a",{href:"https://fullstackopen.com/"},"Full Stack Open")," course by ",r.a.createElement("a",{href:"https://www.helsinki.fi/en"},"University of Helsinki")),r.a.createElement("br",null),r.a.createElement("p",null,"Oskari Tervo, 2019"))},K={login:function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOGIN":return e.concat(t.data);case"RESET_LOGIN":return[];default:return e}},X={changeLogin:function(e,t){return function(){var n=Object(y.a)(v.a.mark(function n(a){var r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K.login({username:e,password:t});case 2:r=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(r)),C.setToken(r.token),a({type:"CHANGE_LOGIN",data:r});case 6:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},errorChange:N,notificationChange:A},Y=Object(_.e)(Object(d.b)(null,X)(function(e){var t=function(){var t=Object(y.a)(v.a.mark(function t(n){var a,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target[0].value,r=n.target[1].value,n.target[1].value="",t.prev=4,t.next=7,e.changeLogin(a,r);case 7:e.notificationChange("Successfully logged in. Welcome back, ".concat(a,"!"),5),e.history.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),e.errorChange("Invalid username or password",5);case 14:case"end":return t.stop()}},t,null,[[4,11]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Login to the application"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,{onSubmit:t},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Username:"),r.a.createElement(j.a.Control,{type:"text",name:"username"}),r.a.createElement(j.a.Label,null,"Password:"),r.a.createElement(j.a.Control,{type:"password"}),r.a.createElement("hr",null),r.a.createElement(o.a,{id:"loginbutton",variant:"primary",type:"submit"},"Login")," ",r.a.createElement(o.a,{type:"reset"},"Reset"))))})),Z={addBlog:function(e){return function(){var t=Object(y.a)(v.a.mark(function t(n){var a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.create(e);case 2:a=t.sent,n({type:"ADD_BLOG",data:Object(S.a)({},a,{user:{username:e.user.username,user:e.user.user,id:e.user.id}})});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},notificationChange:A,errorChange:N},$=Object(d.b)(function(e){return{blogs:e.blogs}},Z)(function(e){var t=function(){var t=Object(y.a)(v.a.mark(function t(n){var a,r,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=JSON.parse(window.localStorage.getItem("loggedBlogappUser")),r=n.target[2].value,l={title:n.target[0].value,author:n.target[1].value,url:-1===r.search("https://")?"https://"+r:r,likes:""===n.target[3].value?0:parseInt(n.target[3].value),user:{id:a.id,name:a.name,username:a.username}},n.target.title.value="",n.target.author.value="",n.target.url.value="",n.target.likes.value="",t.prev=8,t.next=11,e.addBlog(l);case 11:e.notificationChange('A new blog "'.concat(l.title,'" by ').concat(l.author," has been added to the collection"),5),e.setNewBlogVisible(!1),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),""===l.title||""===l.author||""===l.url?e.errorChange("One of the required fields is missing",7):e.blogs.find(function(e){return l.title===e.title})?e.errorChange('A blog titled "'.concat(l.title,'" is already in the collection'),7):"number"!==typeof l.likes||l.likes<0||!Number.isInteger(l.likes)?e.errorChange("Likes has to be an integer valued 0 or greater",7):l.title.length>100||l.author.length>30||l.url.length>100?e.errorChange("At least one field value is longer than the allowed maximum (Title = 100, Author = 30, Url = 100)",7):l.likes>1e10&&e.errorChange("Maximum allowed likes is 10 000 000 000 (ten billion)",7);case 18:case"end":return t.stop()}},t,null,[[8,15]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add a new blog"),r.a.createElement("br",null),r.a.createElement(j.a,{onSubmit:t},r.a.createElement(j.a.Group,null,r.a.createElement(j.a.Label,null,"Title:"),r.a.createElement(j.a.Control,{type:"text",name:"title",id:"title"}),r.a.createElement(j.a.Label,null,"Author:"),r.a.createElement(j.a.Control,{type:"text",name:"author",id:"author"}),r.a.createElement(j.a.Label,null,"URL:"),r.a.createElement(j.a.Control,{type:"text",name:"url",id:"url"}),r.a.createElement(j.a.Label,null,"Likes (optional):"),r.a.createElement(j.a.Control,{type:"text",name:"likes",id:"likes"}),r.a.createElement("hr",null),r.a.createElement(o.a,{id:"save",variant:"primary",type:"submit"},"Save")," ",r.a.createElement(o.a,{type:"reset"},"Reset"))))}),ee=Object(d.b)(function(e){return{blogs:e.blogs}})(function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),l=n[0],c=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),m=i[0],d=i[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"Filter blogs by"),r.a.createElement("form",null,r.a.createElement("p",null,r.a.createElement("input",{name:"title",onChange:function(e){e.preventDefault(),c(e.target.value)},placeholder:"Title",size:"50"})),r.a.createElement("p",null,r.a.createElement("input",{name:"author",onChange:function(e){e.preventDefault(),d(e.target.value)},placeholder:"Author",size:"50"})),r.a.createElement(o.a,{variant:"primary",type:"reset",onClick:function(){c(""),d("")}},"Reset"))),r.a.createElement("br",null),r.a.createElement(b.a,{striped:!0},r.a.createElement("thead",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:3,marginBottom:5}},r.a.createElement("tr",null,r.a.createElement("th",null,"NAME OF THE BLOG"),r.a.createElement("th",null,"AUTHOR"))),function(e){if(""===l&&""===m)return r.a.createElement("tbody",null,e.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(f.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement("td",null,e.author))}));var t=e.map(function(e){if(-1!==e.title.toLowerCase().search(l.toLowerCase()))return e}).filter(function(e){return void 0!==e}).map(function(e){if(-1!==e.author.toLowerCase().search(m.toLowerCase()))return e}).filter(function(e){return void 0!==e});return r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(f.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement("td",null,e.author))}))}(e.blogs)))}),te={resetLogin:function(){return function(){var e=Object(y.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBlogappUser"),t({type:"RESET_LOGIN"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},ne=Object(_.e)(Object(d.b)(null,te)(function(e){return r.a.createElement("div",null,r.a.createElement("p",{className:"text-right"},"Logged in as ",e.user.username," (",e.user.name,") ",r.a.createElement(o.a,{size:"sm",onClick:function(t){t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),e.resetLogin(),e.setUser(null),e.history.push("/login")}},"Logout")),r.a.createElement("br",null))})),ae={initialBlogs:function(){return function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},initialUsers:function(){return function(){var e=Object(y.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},re=Object(d.b)(function(e){return{blogs:e.blogs,users:e.users,login:e.login}},ae)(function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),l=n[0],c=n[1],m=Object(a.useState)(!1),d=Object(u.a)(m,2),b=d[0],g=d[1];Object(a.useEffect)(function(){e.initialBlogs(),e.initialUsers()},[]),Object(a.useEffect)(function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);c(t),C.setToken(t.token)}},[e.login]);var v=e.blogs.length,y=e.users.filter(function(e){return 0!==e.blogs.length}),w={padding:20};return r.a.createElement("div",{className:"container"},r.a.createElement(f.a,null,null===l?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"},"Welcome to my React bloglist app!"),r.a.createElement("br",null),r.a.createElement("h4",{className:"text-center"},r.a.createElement("big",null,r.a.createElement(f.b,{to:"/login"},r.a.createElement("u",null,"Login"))," to the app or ",r.a.createElement(f.b,{to:"/createaccount"},r.a.createElement("u",null,"create"))," an account.")),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,r.a.createElement("b",null,"The database currently has ",v," blogs by ",y.length," users!"))),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,r.a.createElement("b",null,"A total of ",e.users.length," users have registered for the app!"))),r.a.createElement(_.a,{exact:!0,path:"/login",render:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement(Y,null))}}),r.a.createElement(_.a,{exact:!0,path:"/createaccount",render:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"},"Create a new account"),r.a.createElement(J,null))}})):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(s.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(s.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(s.a.Brand,{href:"/"},"Bloglist App"),r.a.createElement(s.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(i.a,{className:"mr-auto"},r.a.createElement(i.a.Link,{href:"#home",as:"span"},r.a.createElement(f.b,{style:w,to:"/"},"Home")),r.a.createElement(i.a.Link,{href:"#blogs",as:"span"},r.a.createElement(f.b,{style:w,to:"/blogs"},"Blogs")),r.a.createElement(i.a.Link,{href:"#users",as:"span"},r.a.createElement(f.b,{style:w,to:"/users"},"Users")),r.a.createElement(i.a.Link,{href:"#about",as:"span"},r.a.createElement(f.b,{style:w,to:"/about"},"About")))))),r.a.createElement("br",null),r.a.createElement(ne,{user:l,setUser:c}),r.a.createElement(_.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement("h1",{className:"text-center"},"Bloglist React App"),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"Welcome to my React bloglist app!")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"Feel free to add blogs and comments as you please")),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"All of the added stuff is pretty much unmoderated, so ",r.a.createElement("b",null,"do not take things too seriously"),", as almost everything is nothing more than a stupid joke.")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"Use the navigation bar on top to find more!")),r.a.createElement(h,{user:l,setUser:c}))}}),r.a.createElement(_.a,{exact:!0,path:"/blogs",render:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement("h1",{className:"text-center"},"Bloglist"),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},r.a.createElement("big",null,"The database currently has ",v," blogs by ",y.length," users!")),r.a.createElement("br",null),function(){var e={display:b?"none":""},t={display:b?"":"none"};return r.a.createElement("div",null,r.a.createElement("div",{style:e},r.a.createElement(o.a,{onClick:function(){return g(!0)}},"Add a new blog")),r.a.createElement("div",{style:t},r.a.createElement($,{setNewBlogVisible:g}),r.a.createElement(o.a,{onClick:function(){return g(!1)}},"Cancel")))}(),r.a.createElement("br",null),r.a.createElement(ee,null))}}),r.a.createElement(_.a,{exact:!0,path:"/blogs/:id",render:function(t){var n,a=t.match;return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement(M,{blog:(n=a.params.id,e.blogs.find(function(e){return e.id===n}))}))}}),r.a.createElement(_.a,{exact:!0,path:"/users",render:function(){return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement("h1",{className:"text-center"},"Users"),r.a.createElement(H,null))}}),r.a.createElement(_.a,{exact:!0,path:"/users/:id",render:function(t){var n,a=t.match;return r.a.createElement(W,{user:(n=a.params.id,e.users.find(function(e){return e.id===n}))})}}),r.a.createElement(_.a,{exact:!0,path:"/about",render:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h1",{className:"text-center"},"About the App"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"This app is a continuation of the work done for the Full Stack Open course by University of Helsinki. During the course, we were tasked to build an app for listing of blogs by different users piece by piece. The last task for the course was to pretty much improve the Bloglist App as much as possible with everything learned during the course and here is my best effort at doing so."),r.a.createElement("br",null),r.a.createElement("p",null,"Although this app is heavily based on the tasks and material of the course, the vast majority of the code is original and done by me. Backend is done using Node.js and all of the data is stored on MongoDB. Frontend is built with React and Redux. Some relevant libraries for this project: Mongoose, Express, bcrypt, cors for backend and Axios, Redux, React-Router-DOM, React-Bootstrap for frontend."),r.a.createElement("br",null),r.a.createElement("p",null,"If you wish to give feedback about the app, feel free to do so by sending me an email at ",r.a.createElement("a",{href:"mailto: tervo.oskari@gmail.com"},"tervo.oskari@gmail.com"),"."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"PS. I know very well how bad and bland the site looks, but unfortunately I lack the artistic vision and patience to improve it to a pleasing degree :|"))}}),r.a.createElement(_.a,{component:function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center"},"404"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",{className:"text-center"},"There does not seem to be anything here..."))}}))),r.a.createElement(q,null))}),le=n(60),ce=n(28),ue=Object(ce.c)({blogs:I,users:P,login:Q,notification:B,error:L}),oe=Object(ce.d)(ue,Object(ce.a)(le.a)),se=function(){c.a.render(r.a.createElement(d.a,{store:oe},r.a.createElement(re,null)),document.getElementById("root"))};se(),oe.subscribe(se)},62:function(e,t,n){e.exports=n(103)},67:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.9e7c700a.chunk.js.map